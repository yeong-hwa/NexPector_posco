<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="server_detail">
  <sql id="SQL_OderBy">
		<foreach collection="sort" item="s" separator=",">
			${s.field} ${s.dir}
		</foreach>
  </sql>
  
  <!-- M07 Switch 장비 -->
  <select id="M07IfInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
    SELECT * FROM (
        SELECT
            ROW_NUMBER() OVER (ORDER BY
										  <if test="sort == null">N_INDEX</if>
										  <if test="sort != null">
											  <choose>
												  <when test="sort.size() == 0">
													  N_INDEX
												  </when>
												  <otherwise>
													  <include refid="SQL_OderBy"/>
												  </otherwise>
											  </choose>
										  </if>) NUM
										  , FOUND_ROWS() AS TOTAL_COUNT
            , A.*
        FROM
          (
            SELECT
                N_MON_ID, N_INDEX, S_DESC, N_TYPE, N_MUT, N_SPEED, S_PHYTS_ADDR
                , N_ADMIN_STATUS, N_OPER_STATUS
                , (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE = A.N_TYPE) S_TYPE
                , (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_ADMIN_STATUS) S_ADMIN_STATUS
                , (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_OPER_STATUS) S_OPER_STATUS
            FROM
                TB_SNMP_REAL_M07_IF A
            WHERE
                N_MON_ID = #{N_MON_ID}
          ) A
    ) X
	  WHERE num BETWEEN #{firstRecordIndex} + 1 AND #{lastRecordIndex}
  </select>

  <select id="M07IfInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
    SELECT
        COUNT(*) CNT
    FROM
        TB_SNMP_REAL_M07_IF
    WHERE
        N_MON_ID = #{N_MON_ID}
  </select>

  <select id="M07TrafficUsageQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
    <![CDATA[
    SELECT
            TO_CHAR(D_DATE, 'yyyymmdd') N_DAY
            , SUM(CASE WHEN S_HOUR = '00' THEN #{S_COLUMN} ELSE 0 END) TIME_00
            , SUM(CASE WHEN S_HOUR = '01' THEN #{S_COLUMN} ELSE 0 END) TIME_01
            , SUM(CASE WHEN S_HOUR = '02' THEN #{S_COLUMN} ELSE 0 END) TIME_02
            , SUM(CASE WHEN S_HOUR = '03' THEN #{S_COLUMN} ELSE 0 END) TIME_03
            , SUM(CASE WHEN S_HOUR = '04' THEN #{S_COLUMN} ELSE 0 END) TIME_04
            , SUM(CASE WHEN S_HOUR = '05' THEN #{S_COLUMN} ELSE 0 END) TIME_05
            , SUM(CASE WHEN S_HOUR = '06' THEN #{S_COLUMN} ELSE 0 END) TIME_06
            , SUM(CASE WHEN S_HOUR = '07' THEN #{S_COLUMN} ELSE 0 END) TIME_07
            , SUM(CASE WHEN S_HOUR = '08' THEN #{S_COLUMN} ELSE 0 END) TIME_08
            , SUM(CASE WHEN S_HOUR = '09' THEN #{S_COLUMN} ELSE 0 END) TIME_09
            , SUM(CASE WHEN S_HOUR = '10' THEN #{S_COLUMN} ELSE 0 END) TIME_10
            , SUM(CASE WHEN S_HOUR = '11' THEN #{S_COLUMN} ELSE 0 END) TIME_11
            , SUM(CASE WHEN S_HOUR = '12' THEN #{S_COLUMN} ELSE 0 END) TIME_12
            , SUM(CASE WHEN S_HOUR = '13' THEN #{S_COLUMN} ELSE 0 END) TIME_13
            , SUM(CASE WHEN S_HOUR = '14' THEN #{S_COLUMN} ELSE 0 END) TIME_14
            , SUM(CASE WHEN S_HOUR = '15' THEN #{S_COLUMN} ELSE 0 END) TIME_15
            , SUM(CASE WHEN S_HOUR = '16' THEN #{S_COLUMN} ELSE 0 END) TIME_16
            , SUM(CASE WHEN S_HOUR = '17' THEN #{S_COLUMN} ELSE 0 END) TIME_17
            , SUM(CASE WHEN S_HOUR = '18' THEN #{S_COLUMN} ELSE 0 END) TIME_18
            , SUM(CASE WHEN S_HOUR = '19' THEN #{S_COLUMN} ELSE 0 END) TIME_19
            , SUM(CASE WHEN S_HOUR = '20' THEN #{S_COLUMN} ELSE 0 END) TIME_20
            , SUM(CASE WHEN S_HOUR = '21' THEN #{S_COLUMN} ELSE 0 END) TIME_21
            , SUM(CASE WHEN S_HOUR = '22' THEN #{S_COLUMN} ELSE 0 END) TIME_22
            , SUM(CASE WHEN S_HOUR = '23' THEN #{S_COLUMN} ELSE 0 END) TIME_23
    FROM
            (
                SELECT
                        N_MON_ID, N_INDEX, D_DATE, #{S_COLUMN}
                        , TO_CHAR(D_DATE, 'hh24') S_HOUR
                FROM
                        TB_SNMP_REAL_M07_TRAFFIC_YEAR
                WHERE
                        N_MON_ID = #{N_MON_ID}
                AND     N_INDEX = #{N_INDEX}
                AND     D_DATE BETWEEN TO_DATE(#{N_DAY} || '000000', 'yyyymmddhh24miss') AND TO_DATE(#{N_DAY} || '235959', 'yyyymmddhh24miss')
                ORDER BY
                        TO_CHAR(D_DATE, 'hh24')
    ) A
    GROUP BY
            TO_CHAR(D_DATE, 'yyyymmdd')
    ]]>
  </select>

  <select id="qry_combo_m07_if" resultType="java.util.HashMap" parameterType="java.util.HashMap">
    SELECT
            N_INDEX CODE, S_DESC VAL
    FROM
            TB_SNMP_REAL_M07_IF
    WHERE
            N_MON_ID = #{N_MON_ID}
    ORDER BY
            N_INDEX
  </select>


	<select id="ServerDetailInfoQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
  		SELECT /* server_detail.ServerDetailInfoQry */
				A.N_MON_ID, A.S_MON_NAME, A.S_MON_IP, A.S_CM_TYPE, A.S_DESC
				, (SELECT S_GROUP_NAME FROM TB_SVR_GROUP WHERE N_GROUP_CODE = A.N_GROUP_CODE AND F_USE = 'Y') GROUP_NAME
				, (SELECT S_TYPE_NAME FROM TB_SVR_TYPE WHERE N_TYPE_CODE = A.N_TYPE_CODE) TYPE_NAME
				, CASE WHEN A.B_CON_INFO = 'Y' THEN '연결' ELSE '연결안됨' END B_CON_INFO
				, (SELECT S_MAP_KEY FROM TB_MON_MAP WHERE N_MON_ID = A.N_MON_ID AND N_MON_TYPE = 0 LIMIT 1) S_CPU_KEY
				, (SELECT S_MAP_KEY FROM TB_MON_MAP WHERE N_MON_ID = A.N_MON_ID AND N_MON_TYPE = 1 LIMIT 1) S_MEM_KEY
				, (SELECT S_MAP_KEY FROM TB_MON_MAP WHERE N_MON_ID = A.N_MON_ID AND N_MON_TYPE = 2 LIMIT 1) S_DISK_KEY
		FROM
				TB_MON_INFO A
		WHERE
				A.N_MON_ID = #{N_MON_ID}
	</select>
	
	<select id="ServerLicenseChkQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
  		SELECT 
				'SVR' AS TYPE,
				COUNT(*) AS COUNT
		FROM
				TB_MON_INFO
		UNION ALL 
		SELECT 
				'SVRLIC' AS TYPE,
				SUM(N_COUNT) AS COUNT
		FROM 
				TB_SVR_LICENSE
		WHERE 
				N_TYPE &lt; 100  
		UNION ALL
		SELECT 
				'IPPHONE' AS TYPE,
				COUNT(*) AS COUNT
		FROM
				TB_MON_IPPHONE_INFO
		UNION ALL				
		SELECT 
				'IPPHONELIC' AS TYPE,
				SUM(N_COUNT) AS COUNT
		FROM 
				TB_SVR_LICENSE
		WHERE 
				N_TYPE = 100  				
	</select>

	<select id="SvrLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.SvrLstQry */
  		SELECT
				N_MON_ID, S_MON_NAME, N_STYLE_CODE, N_TYPE_CODE, S_CM_TYPE
				, (SELECT N_SNMP_MAN_CODE FROM TB_SNMP_INFO WHERE N_MON_ID = A.N_MON_ID) N_SNMP_MAN_CODE
				, (SELECT S_VG_NAME
					  FROM TB_VG_TYPE_LIST
					  WHERE 1=1
					  AND (SELECT UPPER(S_MODEL) FROM TB_SNMP_REAL_M03_DEFAULT WHERE N_MON_ID = A.N_MON_ID LIMIT 1) LIKE CONCAT('%' , UPPER(S_VG_FILTER_TXT) , '%')
		           ) S_VG_NAME
		FROM
				TB_MON_INFO A
		WHERE
				N_MON_ID IN (SELECT N_MON_ID FROM TB_USER_MON_LIST WHERE S_USER_ID = #{SESSION_USER_ID})
			<if test="N_GROUP_CODE != '' and N_GROUP_CODE != null">
					AND N_GROUP_CODE = #{N_GROUP_CODE}
			</if>
			<if test="S_FIND_STR != '' and S_FIND_STR != null">
				AND     (LOWER(S_MON_NAME) LIKE '%' || LOWER(#{S_FIND_STR}) || '%' OR TO_CHAR(N_MON_ID) = #{S_FIND_STR})
			</if>
			<if test="N_TYPE_CODE != '' and N_TYPE_CODE != null">
					AND N_TYPE_CODE = #{N_TYPE_CODE}
			</if>
			<if test="S_VG_FILTER_TXT != '' and S_VG_FILTER_TXT != null">
				<if test="S_VG_FILTER_TXT == 'NOMODEL'">
					AND N_MON_ID IN (SELECT N_MON_ID FROM TB_SNMP_REAL_M03_DEFAULT WHERE S_MODEL IS NULL)
				</if>
				<if test="S_VG_FILTER_TXT != 'NOMODEL'">
					AND (N_MON_ID IN (SELECT N_MON_ID FROM TB_SNMP_REAL_M03_DEFAULT WHERE UPPER(S_MODEL) LIKE '%' || UPPER(#{S_VG_FILTER_TXT}) || '%')
						OR N_MON_ID IN (SELECT N_MON_ID FROM TB_SNMP_REAL_M02_DEFAULT WHERE UPPER(S_MODEL) LIKE '%' || UPPER(#{S_VG_FILTER_TXT}) || '%'))
				</if>
			</if>
			<if test="S_CM_TYPE != '' and S_CM_TYPE != null">
					AND S_CM_TYPE = #{S_CM_TYPE}
			</if>
			<if test="B_CON_INFO != '' and B_CON_INFO != null">
					AND B_CON_INFO = #{B_CON_INFO}
			</if>
	    ORDER BY
	        N_TYPE_CODE ASC,
	        S_MON_NAME ASC
	</select>

	<select id="SvrLstQry2" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT /* server_detail.SvrLstQry2 */
			  CAST(@ROWNUM AS SIGNED) AS TOTAL_COUNT, <!--  MYSQL -->
			  N_MON_ID,
			  S_MON_NAME,
			  N_STYLE_CODE,
			  N_TYPE_CODE,
			  S_TYPE_NAME,
			  CONCAT(N_TYPE_CODE, '|' ,S_TYPE_NAME) AS O_TYPE_NAME,
			  S_CM_TYPE,
			  N_SNMP_MAN_CODE,
			  S_VG_NAME
		  FROM
		  (
			SELECT
				@ROWNUM := @ROWNUM + 1
				, N_MON_ID
				, S_MON_NAME
				, N_STYLE_CODE
				, N_TYPE_CODE
				, (SELECT S_TYPE_NAME FROM TB_SVR_TYPE WHERE N_TYPE_CODE = A.N_TYPE_CODE) S_TYPE_NAME
				, S_CM_TYPE
				, (SELECT N_SNMP_MAN_CODE FROM TB_SNMP_INFO WHERE N_MON_ID = A.N_MON_ID) N_SNMP_MAN_CODE
				, (SELECT S_VG_NAME
				   FROM TB_VG_TYPE_LIST
				   WHERE (SELECT UPPER(S_MODEL)
					  FROM TB_SNMP_REAL_M03_DEFAULT
					  WHERE N_MON_ID = A.N_MON_ID
					  LIMIT 1) LIKE concat('%', UPPER(S_VG_FILTER_TXT), '%')) S_VG_NAME
			FROM
				TB_MON_INFO A, (SELECT @ROWNUM :=0 FROM DUAL) R
			WHERE 1=1
			AND N_MON_ID IN (SELECT N_MON_ID FROM TB_USER_MON_LIST WHERE S_USER_ID = #{SESSION_USER_ID})
			  AND N_MON_ID IN (
					SELECT N_MON_ID
					FROM TB_MON_INFO
					WHERE N_GROUP_CODE IN (
					  SELECT n_group_code
					  FROM (
					  SELECT hierarchy_connect_by_parent_svr_group(n_group_code) AS n_group_code
					  FROM (
						   SELECT
						  <if test="N_GROUP_CODE == null or N_GROUP_CODE == '' or N_GROUP_CODE == -1">
						  @start_with := 0,
						  </if>
						  <if test="N_GROUP_CODE != null and N_GROUP_CODE != '' and N_GROUP_CODE > -1">
						  @start_with := #{N_GROUP_CODE},
						  </if>
						   @n_group_code := @start_with,
						   @LEVEL := 0
						 ) vars, tb_svr_group
					  WHERE @n_group_code IS NOT NULL
					  ) A
					)
			)
			<if test="S_FIND_STR != null and S_FIND_STR != ''">
			AND (LOWER(S_MON_NAME) LIKE concat('%' , LOWER(#{S_FIND_STR}) , '%') OR CAST(N_MON_ID AS CHAR) = #{S_FIND_STR})
			</if>

			<if test="N_TYPE_CODE != null and N_TYPE_CODE != ''">
			AND N_TYPE_CODE = #{N_TYPE_CODE}
			</if>

			<if test="S_VG_FILTER_TXT != null and S_VG_FILTER_TXT != ''">
			  <if test="S_VG_FILTER_TXT == 'NOMODEL'">
			  AND N_MON_ID IN (SELECT N_MON_ID FROM TB_SNMP_REAL_M03_DEFAULT WHERE S_MODEL IS NULL)
			  </if>
			  <if test="S_VG_FILTER_TXT != 'NOMODEL'">
			  AND (N_MON_ID IN (SELECT N_MON_ID FROM TB_SNMP_REAL_M03_DEFAULT WHERE UPPER(S_MODEL) LIKE concat('%' , UPPER(#{S_VG_FILTER_TXT}) , '%'))
			  OR N_MON_ID IN (SELECT N_MON_ID FROM TB_SNMP_REAL_M02_DEFAULT WHERE UPPER(S_MODEL) LIKE concat('%' , UPPER(#{S_VG_FILTER_TXT}) , '%')))
			  </if>
			</if>

			<if test="S_CM_TYPE != null and S_CM_TYPE != ''">
			AND S_CM_TYPE = #{S_CM_TYPE}
			</if>
			<if test="B_CON_INFO != null and B_CON_INFO != ''">
			AND B_CON_INFO = #{B_CON_INFO}
			</if>
			<if test="S_MON_IP != null and S_MON_IP != ''">
			  AND S_MON_IP LIKE concat('%' , #{S_MON_IP} , '%')
			</if>
		  ) A
		<!-- LIMIT  #{firstRecordIndex} , #{lastRecordIndex} -->
  </select>
<!-- 	<select id="SvrLstQry2" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT /* server_detail.SvrLstQry2 */
			  CAST(@ROWNUM AS SIGNED) AS TOTAL_COUNT,  MYSQL
			  N_MON_ID,
			  S_MON_NAME,
			  N_STYLE_CODE,
			  N_TYPE_CODE,
			  S_TYPE_NAME,
			  S_CM_TYPE,
			  N_SNMP_MAN_CODE,
			  S_VG_NAME
		  FROM
		  (
			SELECT
				@ROWNUM := @ROWNUM + 1
				, N_MON_ID
				, S_MON_NAME
				, N_STYLE_CODE
				, N_TYPE_CODE
				, (SELECT S_TYPE_NAME FROM TB_SVR_TYPE WHERE N_TYPE_CODE = A.N_TYPE_CODE) S_TYPE_NAME
				, S_CM_TYPE
				, (SELECT N_SNMP_MAN_CODE FROM TB_SNMP_INFO WHERE N_MON_ID = A.N_MON_ID) N_SNMP_MAN_CODE
				, (SELECT S_VG_NAME
				   FROM TB_VG_TYPE_LIST
				   WHERE (SELECT UPPER(S_MODEL)
					  FROM TB_SNMP_REAL_M03_DEFAULT
					  WHERE N_MON_ID = A.N_MON_ID
					  LIMIT 1) LIKE concat('%', UPPER(S_VG_FILTER_TXT), '%')) S_VG_NAME
			FROM
				TB_MON_INFO A, (SELECT @ROWNUM :=0 FROM DUAL) R
			WHERE 1=1
			AND N_MON_ID IN (SELECT N_MON_ID FROM TB_USER_MON_LIST WHERE S_USER_ID = #{SESSION_USER_ID})
			  AND N_MON_ID IN (
					SELECT N_MON_ID
					FROM TB_MON_INFO
					WHERE N_GROUP_CODE IN (
					  SELECT n_group_code
					  FROM (
					  SELECT hierarchy_connect_by_parent_svr_group(n_group_code) AS n_group_code
					  FROM (
						   SELECT
						  <if test="N_GROUP_CODE == null or N_GROUP_CODE == '' or N_GROUP_CODE == -1">
						  @start_with := 0,
						  </if>
						  <if test="N_GROUP_CODE != null and N_GROUP_CODE != '' and N_GROUP_CODE > -1">
						  @start_with := #{N_GROUP_CODE},
						  </if>
						   @n_group_code := @start_with,
						   @LEVEL := 0
						 ) vars, tb_svr_group
					  WHERE @n_group_code IS NOT NULL
					  ) A
					)
			)
			<if test="S_FIND_STR != null and S_FIND_STR != ''">
			AND (LOWER(S_MON_NAME) LIKE concat('%' , LOWER(#{S_FIND_STR}) , '%') OR CAST(N_MON_ID AS CHAR) = #{S_FIND_STR})
			</if>

			<if test="N_TYPE_CODE != null and N_TYPE_CODE != ''">
			AND N_TYPE_CODE = #{N_TYPE_CODE}
			</if>

			<if test="S_VG_FILTER_TXT != null and S_VG_FILTER_TXT != ''">
			  <if test="S_VG_FILTER_TXT == 'NOMODEL'">
			  AND N_MON_ID IN (SELECT N_MON_ID FROM TB_SNMP_REAL_M03_DEFAULT WHERE S_MODEL IS NULL)
			  </if>
			  <if test="S_VG_FILTER_TXT != 'NOMODEL'">
			  AND (N_MON_ID IN (SELECT N_MON_ID FROM TB_SNMP_REAL_M03_DEFAULT WHERE UPPER(S_MODEL) LIKE concat('%' , UPPER(#{S_VG_FILTER_TXT}) , '%'))
			  OR N_MON_ID IN (SELECT N_MON_ID FROM TB_SNMP_REAL_M02_DEFAULT WHERE UPPER(S_MODEL) LIKE concat('%' , UPPER(#{S_VG_FILTER_TXT}) , '%')))
			  </if>
			</if>

			<if test="S_CM_TYPE != null and S_CM_TYPE != ''">
			AND S_CM_TYPE = #{S_CM_TYPE}
			</if>
			<if test="B_CON_INFO != null and B_CON_INFO != ''">
			AND B_CON_INFO = #{B_CON_INFO}
			</if>
			<if test="S_MON_IP != null and S_MON_IP != ''">
			  AND S_MON_IP LIKE concat('%' , #{S_MON_IP} , '%')
			</if>
		  ) A
		LIMIT  #{firstRecordIndex} , #{lastRecordIndex}
  </select> -->
	<select id="ResourceInfoQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
  		SELECT /* server_detail.ResourceInfoQry */
			A.N_MON_ID
			, SUM(A.N_FULL_SIZE) AS N_FULL_SIZE
			, SUM(A.N_NOW_USE) AS N_NOW_USE
			, IFNULL(SUM(A.N_NOW_USE) / SUM(A.N_FULL_SIZE) * 100, MAX(N_PER_USE)) AS N_PER_USE
			, B.N_MON_TYPE
		FROM
			TB_MON_REAL_RESOURCE A, TB_MON_MAP B
		<where>
			A.N_MON_ID = B.N_MON_ID
			AND A.S_MAP_KEY = B.S_MAP_KEY
			<if test="N_MON_ID != '' and N_MON_ID != null">
				AND A.N_MON_ID = #{N_MON_ID}
			</if>
		</where>
		GROUP BY A.N_MON_ID, B.N_MON_TYPE
	</select>

	<select id="RealResourceUsageQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.RealResourceUsageQry */
		SELECT
				N_MON_ID, S_MAP_KEY, N_PER_USE, N_FULL_SIZE, N_NOW_USE
				, concat(N_MON_ID, ';' , A.S_MAP_KEY) S_KEY
		FROM
				TB_MON_REAL_RESOURCE A
	</select>

	<select id="RealResourceUsageQry2" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.RealResourceUsageQry2 */
		SELECT
				N_MON_ID, S_MAP_KEY, N_PER_USE, N_FULL_SIZE, N_NOW_USE
				, concat(N_MON_ID, ';' , A.S_MAP_KEY) S_KEY
		FROM
				TB_MON_REAL_RESOURCE A
		WHERE
				N_MON_ID = #{N_MON_ID} AND S_MAP_KEY = #{S_MAP_KEY}
		LIMIT 1
	</select>

	<select id="RealProcessServiceUsageQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.RealProcessServiceUsageQry */
		SELECT
				N_MON_ID, S_MAP_KEY, F_STATUS, N_NOW_USE
				, concat(N_MON_ID, ';' , A.S_MAP_KEY) S_KEY
		FROM
				TB_MON_REAL_PROCESS A
		UNION ALL
		SELECT
				N_MON_ID, S_MAP_KEY, F_STATUS, N_NOW_USE
				, concat(N_MON_ID, ';' , A.S_MAP_KEY) S_KEY
		FROM
				TB_MON_REAL_SERVICE A
	</select>

	<select id="RealProcessServiceUsageQry2" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.RealProcessServiceUsageQry2 */
		SELECT * FROM (
			SELECT
					N_MON_ID, S_MAP_KEY, F_STATUS, N_NOW_USE
					, concat(N_MON_ID, ';' , A.S_MAP_KEY) S_KEY
			FROM
					TB_MON_REAL_PROCESS A
			UNION ALL
			SELECT
					N_MON_ID, S_MAP_KEY, F_STATUS, N_NOW_USE
					, concat(N_MON_ID, ';' , A.S_MAP_KEY) S_KEY
			FROM
					TB_MON_REAL_SERVICE A
		) A
		WHERE
				N_MON_ID = #{N_MON_ID} AND S_MAP_KEY = #{S_MAP_KEY}
		LIMIT 1
	</select>

	<select id="RealProcessServiceUsageQry3" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.RealProcessServiceUsageQry3 */
		SELECT
				*
		FROM
				(
					SELECT
							N_MON_ID, S_MAP_KEY, F_STATUS, N_NOW_USE
							, concat(N_MON_ID, ';' , A.S_MAP_KEY) S_KEY
					FROM
							TB_MON_REAL_PROCESS A
					WHERE
							N_MON_ID = #{N_MON_ID}
					UNION ALL
					SELECT
							N_MON_ID, S_MAP_KEY, F_STATUS, N_NOW_USE
							, concat(N_MON_ID, ';' , A.S_MAP_KEY) S_KEY
					FROM
							TB_MON_REAL_SERVICE A
					WHERE
							N_MON_ID = #{N_MON_ID}
				) A
		WHERE
        S_MAP_KEY IN (SELECT S_MAP_KEY FROM TB_MON_MAP WHERE N_MON_ID = #{N_MON_ID} AND F_USE = 'Y' AND N_MON_TYPE = #{N_MON_TYPE})
	</select>

	<select id="RealServiceUsageQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.RealServiceUsageQry */
		SELECT N_MON_ID, S_MAP_KEY
			, CASE WHEN (SELECT count(*) FROM TB_ALM WHERE N_MON_ID = A.N_MON_ID AND S_MAP_KEY = A.S_MAP_KEY AND N_ALM_STATUS > 0) IN (0) THEN 1 ELSE 0 END AS F_STATUS
		FROM TB_MON_MAP A 
		WHERE N_MON_ID = #{N_MON_ID} AND N_MON_TYPE = 4
	</select>

	<select id="AccrueResourceUsageQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.AccrueResourceUsageQry */
		SELECT
				N_DAY, N_MON_ID, S_MAP_KEY
				, TIME_00, TIME_01, TIME_02, TIME_03
				, TIME_04, TIME_05, TIME_06, TIME_07
				, TIME_08, TIME_09, TIME_10, TIME_11
				, TIME_12, TIME_13, TIME_14, TIME_15
				, TIME_16, TIME_17, TIME_18, TIME_19
				, TIME_20, TIME_21, TIME_22, TIME_23
		FROM
				TB_MON_ACCRUE_RESOURCE
		WHERE
				N_MON_ID = #{N_MON_ID}
		AND		S_MAP_KEY = #{S_MAP_KEY}
		AND		N_DAY = #{N_DAY}
	</select>
	
	<select id="resourceUsingHistoryQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.resourceUsingHistoryQry */
		select N_MON_ID, S_MAP_KEY, TIMES, max(N_PER_USE) AS N_PER_USE
		from (
			select *, date_format(D_INS_DATE, '%i') TIMES
			from TB_MON_HISTORY_RESOURCE_${TARGET_MONTH}
			where N_MON_ID = #{N_MON_ID}
				and	S_MAP_KEY = #{S_MAP_KEY}
				and	D_INS_DATE &gt;= str_to_date(#{N_DATE_HOUR}, '%Y%m%d%H')
				and	D_INS_DATE &lt; date_add(str_to_date(#{N_DATE_HOUR}, '%Y%m%d%H'), interval 1 hour)
		) A
		group by N_MON_ID, S_MAP_KEY, TIMES
		order by TIMES
	</select>
	
	<select id="resourceUsingProcessTopHistoryQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.resourceUsingProcessTopHistoryQry */
		SELECT X.*
		FROM (
			SELECT *
			FROM tb_mon_history_process_${TARGET_MONTH}
			WHERE MON_ID = #{N_MON_ID} 
				AND	INS_DATE &gt;= str_to_date(#{N_DATE_TIME}, '%Y%m%d%H%i')
				AND	INS_DATE &lt; date_add(str_to_date(#{N_DATE_TIME}, '%Y%m%d%H%i'), interval 1 minute)
			ORDER BY INS_DATE DESC
			LIMIT 3
		) X
		ORDER BY N_INDEX DESC
	</select>
	
	<select id="AccrueResourcePeekAndAvgUsageQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.AccrueResourcePeekAndAvgUsageQry */

		SELECT
				'피크' AS NAME
				, TIME_00, TIME_01, TIME_02, TIME_03
				, TIME_04, TIME_05, TIME_06, TIME_07
				, TIME_08, TIME_09, TIME_10, TIME_11
				, TIME_12, TIME_13, TIME_14, TIME_15
				, TIME_16, TIME_17, TIME_18, TIME_19
				, TIME_20, TIME_21, TIME_22, TIME_23
		FROM
				TB_MON_ACCRUE_RESOURCE
		WHERE
				N_MON_ID = #{N_MON_ID}
		AND		S_MAP_KEY = #{S_MAP_KEY}
		AND		N_DAY = #{N_DAY}
		UNION ALL
		SELECT
				'평균' AS NAME
				, TIME_00, TIME_01, TIME_02, TIME_03
				, TIME_04, TIME_05, TIME_06, TIME_07
				, TIME_08, TIME_09, TIME_10, TIME_11
				, TIME_12, TIME_13, TIME_14, TIME_15
				, TIME_16, TIME_17, TIME_18, TIME_19
				, TIME_20, TIME_21, TIME_22, TIME_23
		FROM
				TB_MON_ACCRUE_RESOURCE_AVG
		WHERE
				N_MON_ID = #{N_MON_ID}
		AND		S_MAP_KEY = #{S_MAP_KEY}
		AND		CONCAT(N_DAY,'') = DATE_FORMAT(DATE_ADD(STR_TO_DATE(#{N_DAY}, '%Y%m%d'), INTERVAL-1 DAY), '%Y%m%d')
	</select>

	<select id="AccrueProcessUsageQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.AccrueProcessUsageQry */
		SELECT
				N_DAY
				, TIME_00, TIME_01, TIME_02, TIME_03
				, TIME_04, TIME_05, TIME_06, TIME_07
				, TIME_08, TIME_09, TIME_10, TIME_11
				, TIME_12, TIME_13, TIME_14, TIME_15
				, TIME_16, TIME_17, TIME_18, TIME_19
				, TIME_20, TIME_21, TIME_22, TIME_23
		FROM
				TB_MON_ACCRUE_PROCESS
		WHERE
				N_MON_ID = #{N_MON_ID}
		AND		S_MAP_KEY = #{S_MAP_KEY}
		AND		N_DAY = #{N_DAY}
	</select>

	<select id="AccrueServiceUsageQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.AccrueServiceUsageQry */
		SELECT
				N_DAY
				, TIME_00, TIME_01, TIME_02, TIME_03
				, TIME_04, TIME_05, TIME_06, TIME_07
				, TIME_08, TIME_09, TIME_10, TIME_11
				, TIME_12, TIME_13, TIME_14, TIME_15
				, TIME_16, TIME_17, TIME_18, TIME_19
				, TIME_20, TIME_21, TIME_22, TIME_23
		FROM
				TB_MON_ACCRUE_SERVICE
		WHERE
				N_MON_ID = #{N_MON_ID}
		AND		S_MAP_KEY = #{S_MAP_KEY}
		AND		N_DAY = #{N_DAY}
	</select>

	<select id="ResourceLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ResourceLstQry */
		SELECT
				A.S_MAP_KEY, RTRIM(A.S_MON_NAME) S_MON_TYPE_NAME, A.N_MON_TYPE, B.N_FULL_SIZE, B.N_NOW_USE
		FROM
				TB_MON_MAP A,
                TB_MON_REAL_RESOURCE B
		WHERE
				A.S_MAP_KEY = B.S_MAP_KEY
		AND		A.N_MON_ID = B.N_MON_ID		
		AND		A.N_MON_ID = #{N_MON_ID}
		AND		A.N_MON_TYPE IN (0, 1, 2)
		AND		A.F_USE = 'Y'
		ORDER BY
				A.S_MAP_KEY, A.N_MON_TYPE
	</select>

	<select id="ProcessLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ProcessLstQry */
		SELECT
				S_MAP_KEY, CONCAT(RTRIM(S_MON_NAME), ' [', IFNULL(S_ALIAS, ''), ']') S_MON_TYPE_NAME
		FROM
				TB_MON_MAP
		WHERE
				N_MON_ID = #{N_MON_ID}
		AND		N_MON_TYPE = '3'
		AND		F_USE = 'Y'
	</select>

	<select id="ServiceLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServiceLstQry */
		SELECT
				S_MAP_KEY, CONCAT(RTRIM(S_MON_NAME), ' [', IFNULL(S_ALIAS, ''), ']') S_MON_TYPE_NAME
		FROM
				TB_MON_MAP
		WHERE
				N_MON_ID = #{N_MON_ID}
		AND		N_MON_TYPE = '4'
		AND		F_USE = 'Y'
	</select>

	<select id="IcmpLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.IcmpLstQry */
		SELECT
				A.N_MON_ID, A.S_ICMP_IP
				, CONCAT( A.N_MON_ID, ';' , A.S_ICMP_IP) S_KEY
				,      COALESCE(B.N_RES_TYPE, -1) N_RES_TYPE, COALESCE(B.N_RES_TIME, -1) N_RES_TIME
		FROM
				TB_MON_ICMP_INFO A LEFT OUTER JOIN TB_MON_ICMP_RES B ON A.N_MON_ID = B.N_MON_ID AND A.S_ICMP_IP = B.S_ICMP_IP
		<where>
			<if test="N_MON_ID != '' and N_MON_ID != null">
				AND A.N_MON_ID = #{N_MON_ID}
			</if>
		</where>
		ORDER BY
				A.N_MON_ID, A.S_ICMP_IP
	</select>

	<select id="IcmpLstQry2" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.AccrueResourcePeekAndAvgUsageQry */
		SELECT
				A.N_MON_ID, A.S_ICMP_IP
				, CONCAT( A.N_MON_ID, ';' , A.S_ICMP_IP) S_KEY
				, COALESCE(B.N_RES_TYPE, -1) N_RES_TYPE, COALESCE(B.N_RES_TIME, -1) N_RES_TIME
		FROM
				TB_MON_ICMP_INFO A LEFT OUTER JOIN TB_MON_ICMP_RES B ON A.N_MON_ID = B.N_MON_ID AND A.S_ICMP_IP = B.S_ICMP_IP
		WHERE

				A.N_MON_ID = #{N_MON_ID}
		AND 	A.S_ICMP_IP = #{S_ICMP_IP}
		AND		ROWNUM = 1
		ORDER BY
				A.N_MON_ID, A.S_ICMP_IP
	</select>

	<select id="ErrorStatsRetrieveQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ErrorStatsRetrieveQry */
		SELECT X.*, @ROWNUM AS TOTAL_COUNT
		FROM (
			SELECT
				@ROWNUM := @ROWNUM+1 AS NUM
				, S_ALM_KEY, D_UPDATE_TIME, N_MON_ID, S_MON_NAME, S_MAP_KEY, N_ALM_TYPE, N_ALM_CODE, N_ALM_RATING, N_ALM_STATUS, N_ORDER, COALESCE(S_ALM, ' ') AS S_ALM
				, COALESCE(S_ALM_MSG, '-') AS S_ALM_MSG
				, COALESCE(S_ALM_MSG, '-') AS TOOL_S_ALM_MSG
				, S_ALM_RATING_NAME, S_ALM_STATUS_NAME, S_PROCESS
			FROM
			(
				SELECT
					DATE_FORMAT( D_UPDATE_TIME, '%Y-%m-%d %H:%i:%s') D_UPDATE_TIME
					, S_ALM_KEY, N_MON_ID, S_MAP_KEY, N_ALM_TYPE, N_ALM_CODE, N_ALM_RATING, N_ALM_STATUS
					, (SELECT S_MON_NAME FROM TB_MON_INFO WHERE N_MON_ID = A.N_MON_ID) S_MON_NAME
					, (SELECT S_ALM_MSG FROM TB_ALM_CODE WHERE N_ALM_TYPE = A.N_ALM_TYPE AND N_ALM_CODE = A.N_ALM_CODE) S_ALM
<!-- 					, CONCAT(
						(SELECT S_ALM_MSG FROM TB_ALM_CODE WHERE N_ALM_TYPE = A.N_ALM_TYPE AND N_ALM_CODE = A.N_ALM_CODE)
						, ' ['
						, IFNULL((SELECT S_MSG FROM TB_ALM_HISTORY WHERE N_MON_ID = A.N_MON_ID AND S_ALM_KEY = A.S_ALM_KEY AND D_UPDATE_TIME = A.D_UPDATE_TIME 
							AND N_ALM_STATUS = A.N_ALM_STATUS AND N_ALM_RATING = A.N_ALM_RATING LIMIT 1), '')
						, ']'
					) AS S_ALM_MSG -->
					, f_make_only_alm_msg(A.S_ALM_KEY, A.N_ALM_STATUS, A.D_UPDATE_TIME) S_ALM_MSG
					, (SELECT S_ALM_RATING_NAME FROM TB_ALM_RATING_CODE WHERE N_ALM_RATING = A.N_ALM_RATING) S_ALM_RATING_NAME
					, (SELECT S_ALM_STATUS_NAME FROM TB_ALM_STATUS_CODE WHERE N_ALM_STATUS = A.N_ALM_STATUS) S_ALM_STATUS_NAME
					, (SELECT N_ORDER FROM TB_ALM_STATUS_CODE WHERE N_ALM_STATUS = A.N_ALM_STATUS) N_ORDER
					, (SELECT S_PROCESS FROM TB_ALM_HISTORY WHERE S_ALM_KEY = A.S_ALM_KEY AND N_MON_ID = A.N_MON_ID AND D_UPDATE_TIME = A.D_UPDATE_TIME LIMIT 1) S_PROCESS
					, (SELECT S_ALM_MSG FROM TB_ALM_CODE
				WHERE 
					N_ALM_TYPE = (SELECT N_ALM_TYPE FROM TB_ALM WHERE N_MON_ID = A.N_MON_ID AND S_ALM_KEY = A.S_ALM_KEY)
					AND N_ALM_CODE = (SELECT N_ALM_CODE FROM TB_ALM WHERE N_MON_ID = A.N_MON_ID AND S_ALM_KEY = A.S_ALM_KEY)) DTL_S_MSG
				FROM
					TB_ALM A
				WHERE
					N_MON_ID = #{N_MON_ID} AND N_ALM_STATUS = 2
			) A, (SELECT @ROWNUM := 0) R
			ORDER BY
			<if test="sort == null">D_UPDATE_TIME DESC</if>
			<if test="sort != null">
				<choose>
					<when test="sort.size() == 0">
						D_UPDATE_TIME DESC
					</when>
				<otherwise>
					<include refid="SQL_OderBy"/>
				</otherwise>
				</choose>
			</if>
			) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>
	   
	<select id="ErrorStatsRetrieveCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ErrorStatsRetrieveCntQry */
	   	SELECT
			COUNT(*) CNT
		FROM
			TB_ALM A
		WHERE
			N_MON_ID = #{N_MON_ID}
	</select>
	
	<select id="ErrorHistoryRetrieveQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ErrorHistoryRetrieveQry */
		SELECT  @ROWNUM AS TOTAL_COUNT, X.*
		FROM (
			SELECT
				@ROWNUM := @ROWNUM+1 AS NUM
				, S_ALM_KEY, D_UPDATE_TIME, N_ALM_STATUS, N_ORDER, N_ALM_RATING, S_USER_ID, S_PROCESS
				, COALESCE(S_MSG, '-') AS S_MSG
				, COALESCE(S_MSG, '-') AS TOOL_S_MSG
				, S_ALM_RATING_NAME, S_USER_NAME, S_ALM_STATUS_NAME
			FROM
			(
				SELECT
					S_ALM_KEY
					, DATE_FORMAT(D_UPDATE_TIME, '%Y-%m-%d %H:%i:%s') D_UPDATE_TIME
					, N_ALM_STATUS, N_ALM_RATING, S_USER_ID, S_PROCESS
					, (SELECT S_ALM_RATING_NAME FROM TB_ALM_RATING_CODE WHERE N_ALM_RATING = A.N_ALM_RATING) S_ALM_RATING_NAME
					, (SELECT S_USER_NAME FROM TB_USER_INFO WHERE S_USER_ID = A.S_USER_ID) S_USER_NAME
					, (SELECT S_ALM_STATUS_NAME FROM TB_ALM_STATUS_CODE WHERE N_ALM_STATUS = A.N_ALM_STATUS) S_ALM_STATUS_NAME
					, (SELECT N_ORDER FROM TB_ALM_STATUS_CODE WHERE N_ALM_STATUS = A.N_ALM_STATUS) N_ORDER
<!-- 					, CONCAT((
						  SELECT S_ALM_MSG 
						  FROM TB_ALM_CODE 
						  WHERE 
							N_ALM_TYPE = (SELECT N_ALM_TYPE FROM TB_ALM WHERE N_MON_ID = A.N_MON_ID AND S_ALM_KEY = A.S_ALM_KEY)
							AND 
							N_ALM_CODE = (SELECT N_ALM_CODE FROM TB_ALM WHERE N_MON_ID = A.N_MON_ID AND S_ALM_KEY = A.S_ALM_KEY)
						)
						, ' ['
						, IFNULL(S_MSG, '')
						, ']'
					) AS S_MSG -->
					, f_make_only_alm_msg(A.S_ALM_KEY, A.N_ALM_STATUS, A.D_UPDATE_TIME) S_MSG
					
					FROM
						TB_ALM_HISTORY A
					WHERE
						N_MON_ID = #{N_MON_ID}
				) A, (SELECT @ROWNUM := 0) R
			) X
			ORDER BY
			<if test="sort == null">D_UPDATE_TIME DESC</if>
			<if test="sort != null">
				<choose>
					<when test="sort.size() == 0">
						D_UPDATE_TIME DESC
					</when>
					<otherwise>
						<include refid="SQL_OderBy"/>
					</otherwise>
				</choose>
			</if>
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="ErrorHistoryRetrieveCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ErrorHistoryRetrieveCntQry */
    		SELECT
					COUNT(*) CNT
			FROM
					TB_ALM_HISTORY A
			WHERE
					S_ALM_KEY = #{S_ALM_KEY} AND N_MON_ID = #{N_MON_ID}
   </select>

   <select id="SvrProcessServiceInfoQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.SvrProcessServiceInfoQry */
   		SELECT
				N_MON_ID
				, SUM(PROCESS_CNT) PROCESS_CNT
				, SUM(PROCESS_ERR_CNT) PROCESS_ERR_CNT
				, SUM(SERVICE_CNT) SERVICE_CNT
				, SUM(SERVICE_ERR_CNT) SERVICE_ERR_CNT
				, SUM(CRITICAL_ERR_CNT) CRITICAL_ERR_CNT
				, SUM(MAJOR_ERR_CNT) MAJOR_ERR_CNT
				, SUM(MINOR_ERR_CNT) MINOR_ERR_CNT
		FROM
		(
		SELECT
				N_MON_ID
				, CASE WHEN GUBUN = 'PROCESS' THEN 1 ELSE 0 END PROCESS_CNT
				, CASE WHEN GUBUN = 'PROCESS' THEN ERR_CNT ELSE 0 END PROCESS_ERR_CNT
				, CASE WHEN GUBUN = 'SERVICE' THEN 1 ELSE 0 END SERVICE_CNT
				, CASE WHEN GUBUN = 'SERVICE' THEN ERR_CNT ELSE 0 END SERVICE_ERR_CNT
				, CASE WHEN GUBUN = 'ERROR' AND S_MAP_KEY = '1' THEN ERR_CNT ELSE 0 END CRITICAL_ERR_CNT
				, CASE WHEN GUBUN = 'ERROR' AND S_MAP_KEY = '2' THEN ERR_CNT ELSE 0 END MAJOR_ERR_CNT
				, CASE WHEN GUBUN = 'ERROR' AND S_MAP_KEY = '3' THEN ERR_CNT ELSE 0 END MINOR_ERR_CNT
		FROM
				(
					SELECT
							'PROCESS' GUBUN, S_MAP_KEY, N_MON_ID
							, (SELECT COUNT(*) FROM TB_ALM WHERE N_MON_ID = A.N_MON_ID AND S_MAP_KEY = A.S_MAP_KEY AND N_ALM_STATUS > 1) ERR_CNT
					FROM
							TB_MON_MAP A
					WHERE
							N_MON_TYPE = '3'
					AND		F_USE = 'Y'
					UNION ALL
					SELECT
							'SERVICE' GUBUN, S_MAP_KEY, N_MON_ID
							, (SELECT COUNT(*) FROM TB_ALM WHERE N_MON_ID = A.N_MON_ID AND S_MAP_KEY = A.S_MAP_KEY AND N_ALM_STATUS > 1) ERR_CNT
					FROM
							TB_MON_MAP A
					WHERE
							N_MON_TYPE = '4'
					AND		F_USE = 'Y'
					UNION ALL
					SELECT
							'ERROR' GUBUN, concat(B.N_ALM_RATING, '') ALM_RATING, A.N_MON_ID, COUNT(*) ERR_CNT
					FROM
							TB_ALM A RIGHT OUTER JOIN (SELECT X.*, n_alm_rating ERR_RATING FROM TB_ALM_RATING_CODE X) B ON A.N_ALM_RATING = B.N_ALM_RATING
					WHERE
							A.N_ALM_STATUS > 1
					AND		B.ERR_RATING &lt;= 3
					GROUP BY
							A.N_MON_ID, B.N_ALM_RATING
				) A
				WHERE
						N_MON_ID = #{N_MON_ID}
		) A
		GROUP BY N_MON_ID
   </select>

   <select id="SnmpM01InfoQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.SnmpM01InfoQry */
		SELECT
				N_MON_ID, S_MODEL, S_NAME
				, (SELECT COUNT(*) FROM TB_SNMP_REAL_M01_PHONE WHERE N_MON_ID = A.N_MON_ID) N_PHONE_REG
				, (SELECT COUNT(*) FROM TB_SNMP_REAL_M01_IPSI WHERE N_MON_ID = A.N_MON_ID) N_IPSI_REG
				, (SELECT COUNT(*) FROM TB_SNMP_REAL_M01_BOARD WHERE N_MON_ID = A.N_MON_ID) N_BOARD_REG
		FROM
				TB_SNMP_REAL_M01_DEFAULT A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M01PhoneInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M01PhoneInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}, N_EXT_ID</if>
    										<if test="order_id == null or order_id == ''">N_EXT_ID</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_MON_ID, N_EXT_ID, S_EXT_NUM, S_TYPE, S_NAME, S_PORT
						FROM
								TB_SNMP_REAL_M01_PHONE A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M01PhoneInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M01PhoneInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M01_PHONE A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M01IpsiInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M01IpsiInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}, N_EXT_ID</if>
    										<if test="order_id == null or order_id == ''">S_PORT</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_MON_ID, S_PORT, S_PRILOCATION
								, S_PRIHOST, S_PRIDHCPID, S_PRISRVSTATE
								, S_PRICNTLSTATE, S_PRIHEALTH, S_SECLOCATION
								, S_SECHOST, S_SECDHCPID, S_SECSRVSTATE
								, S_SECCNTLSTATE, S_SECHEALTH
						FROM
								TB_SNMP_REAL_M01_IPSI A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M01IpsiInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M01IpsiInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M01_IPSI A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M01BoardInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M01BoardInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}, N_EXT_ID</if>
    										<if test="order_id == null or order_id == ''">S_NUM</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_MON_ID, S_NUM, S_TYPE
								, S_CODE, S_SUFFIX, S_VINTAGE
						FROM
								TB_SNMP_REAL_M01_BOARD A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M01BoardInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M01BoardInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M01_BOARD A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M01GroupLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M01GroupLstQry */
		SELECT
		      IF(M.CODE, '', SUB.N_GROUP_CODE, M.CODE) CODE
		    , concat(IF(M.G_NAME, '', SUB.S_GROUP_NAME, M.G_NAME) , '(' , IF(M.CNT, '', 0, M.CNT) , ')') G_NAME
		FROM
		    (
		        SELECT
		            N_GROUP_CODE CODE, S_GROUP_NAME G_NAME, COUNT(N_GROUP_CODE) CNT
		        FROM
		            TB_SVR_GROUP A
		            JOIN TB_SNMP_REAL_M01_IPPHONEDATA B ON A.N_GROUP_CODE = B.N_GROUP
		        WHERE
		            B.N_MON_ID = #{N_MON_ID}
		        GROUP BY
		            N_GROUP_CODE, S_GROUP_NAME
		        ) M, TB_SVR_GROUP SUB
		WHERE
		    M.CODE(+) = SUB.N_GROUP_CODE
		ORDER BY
		    CODE
	</select>

	<!-- 2014-12-19 새로운 버전  -->
	<select id="M01IPPhoneInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M01IPPhoneInfoLstQry */
		SELECT * FROM (

				SELECT
		    			ROW_NUMBER() OVER (ORDER BY
													<if test="sort == null">S_EXT_NUM</if>
													<if test="sort != null">
														<choose>
															<when test="sort.size() == 0">
																S_EXT_NUM
															</when>
															<otherwise>
																<include refid="SQL_OderBy"/>
															</otherwise>
														</choose>
													</if>) NUM,
						FOUND_ROWS() AS TOTAL_COUNT,
						A.N_MON_ID, A.S_IPADDRESS, A.S_EXT_NUM, A.S_TYPE, A.S_NAME, A.S_MACADDRESS, A.N_STAT, D.S_VALUE,
        (SELECT S_GROUP_NAME FROM TB_SVR_GROUP B WHERE B.N_GROUP_CODE = A.N_GROUP AND B.F_USE = 'Y') N_GROUP
				FROM
						TB_SNMP_REAL_M01_IPPHONEDATA A, TB_NUM_CODE D
				WHERE
						1 = 1
						AND A.N_STAT = D.N_CODE
        				AND D.S_GROUP_CODE = 'AVAYA_CM_IPPHONE_STATE'
						<if test="N_MON_ID != '' and N_MON_ID != null">
							AND A.N_MON_ID = #{N_MON_ID}
						</if>
						<if test="N_GROUP != '' and N_GROUP != null and N_GROUP != 0">
							AND A.N_GROUP = #{N_GROUP}
						</if>
						<if test="S_EXT_NUM != '' and S_EXT_NUM != null">
							AND A.S_EXT_NUM LIKE concat('%' , #{S_EXT_NUM} , '%')
						</if>
						<if test="S_MACADDRESS != '' and S_MACADDRESS != null">
							AND A.S_MACADDRESS LIKE concat('%' , #{S_MACADDRESS} , '%')
						</if>
						<if test="S_IPADDRESS != '' and S_IPADDRESS != null">
							AND A.S_IPADDRESS LIKE concat('%' , #{S_IPADDRESS} , '%')
						</if>
						<if test="S_PHONE_STATUS != '' and S_PHONE_STATUS != null">
							AND D.N_CODE = #{S_PHONE_STATUS}
						</if>
		) X
		WHERE num BETWEEN #{firstRecordIndex} + 1 AND #{lastRecordIndex}

	</select>


	<select id="M01IPPhoneInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M01IPPhoneInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M01_IPPHONEDATA A, TB_NUM_CODE D
		WHERE
				1 = 1
				AND A.N_STAT = D.N_CODE
        		AND D.S_GROUP_CODE = 'AVAYA_CM_IPPHONE_STATE'
				<if test="N_MON_ID != '' and N_MON_ID != null">
					AND N_MON_ID = #{N_MON_ID}
				</if>
				<if test="N_GROUP != '' and N_GROUP != null and N_GROUP != 0">
					AND N_GROUP = #{N_GROUP}
				</if>
				<if test="S_EXT_NUM != '' and S_EXT_NUM != null">
					AND S_EXT_NUM LIKE concat('%' , #{S_EXT_NUM} , '%')
				</if>
				<if test="S_MACADDRESS != '' and S_MACADDRESS != null">
					AND S_MACADDRESS LIKE concat('%' , #{S_MACADDRESS} , '%')
				</if>
				<if test="S_IPADDRESS != '' and S_IPADDRESS != null">
					AND S_IPADDRESS LIKE concat('%' , #{S_IPADDRESS} , '%')
				</if>
				<if test="S_PHONE_STATUS != '' and S_PHONE_STATUS != null">
					AND D.N_CODE = #{S_PHONE_STATUS}
				</if>
	</select>

	<select id="SnmpM02InfoQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.SnmpM02InfoQry */
		SELECT
				N_MON_ID, S_MODEL, S_NAME, D_ST_TIME, S_VERSION
				, N_PHONE_REG, N_PHONE_UN, N_PHONE_REJ
				, N_GW_REG, N_GW_UN, N_GW_REJ
				, N_MEDIA_REG, N_MEDIA_UN, N_MEDIA_REJ
				, N_CTI_REG, N_CTI_UN, N_CTI_REJ
				, N_VM_REG, N_VM_UN, N_VM_REJ
				, (SELECT COUNT(*) FROM TB_SNMP_REAL_M02_H323 WHERE N_MON_ID = A.N_MON_ID) N_H323_REG
				, (SELECT COUNT(*) FROM TB_SNMP_REAL_M02_SIP WHERE N_MON_ID = A.N_MON_ID) N_SIP_REG
		FROM
				TB_SNMP_REAL_M02_DEFAULT A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M02PhoneInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02PhoneInfoLstQry */
		SELECT *
			FROM (
				   SELECT
					 @ROWNUM := @ROWNUM + 1 AS  NUM,
					 N_MON_ID,
					 N_INDEX,
					 S_NAME,
					 S_MAC_ADDR,
					 S_DESC,
					 S_USER,
					 S_IP,
					 N_STATUS,
					 D_REG_TIME,
					 S_LOAD_ID,
					 N_POOL_ID,
					 N_INET_IP_TYPE,
					 S_INET_ADDR,
					 N_STATUS_REASON,
					 D_REASON_TIME,
					 S_PRODUCT_NAME,
					 N_PHONE_PROTOCOL,
					 S_STATUS_REASON,
					 S_INET_IP_TYPE,
					 S_STATUS,
					 S_PHONE_PROTOCOL,
					 ALM_CNT,
					 REPLACE(S_EXT_NO, ',', '') S_EXT_NO,
					 S_MON_NAME
				   FROM
					 (
					   SELECT
						 N_MON_ID,
						 N_INDEX,
						 S_NAME,
						 S_MAC_ADDR,
						 S_DESC,
						 S_USER,
						 S_IP,
						 N_STATUS,
						 D_REG_TIME,
						 S_LOAD_ID,
						 N_POOL_ID,
						 N_INET_IP_TYPE,
						 S_INET_ADDR,
						 N_STATUS_REASON,
						 D_REASON_TIME,
						 S_PRODUCT_NAME,
						 N_PHONE_PROTOCOL,
						 (SELECT S_MON_NAME
						  FROM TB_MON_INFO
						  WHERE N_MON_ID = A.N_MON_ID)                                                               S_MON_NAME,
						 (SELECT S_OUT_VALUE
						  FROM TB_SNMP_VALUE_TYPE_CODE
						  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE =
																					 A.N_STATUS_REASON)              S_STATUS_REASON,
						 (SELECT S_OUT_VALUE
						  FROM TB_SNMP_VALUE_TYPE_CODE
						  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_INET_IP_TYPE)  S_INET_IP_TYPE,
						 (SELECT S_OUT_VALUE
						  FROM TB_SNMP_VALUE_TYPE_CODE
						  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_STATUS)        S_STATUS,
						 (SELECT S_OUT_VALUE
						  FROM TB_SNMP_VALUE_TYPE_CODE
						  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '3' AND S_IN_VALUE =
																					 A.N_PHONE_PROTOCOL)             S_PHONE_PROTOCOL,
						 (SELECT COUNT(*)
						  FROM TB_ALM_HISTORY
						  WHERE S_ALM_KEY IN (SELECT S_ALM_KEY
											  FROM TB_ALM
											  WHERE N_ALM_STATUS > 1 AND N_ALM_TYPE = '14002' AND N_ALM_CODE LIKE '1___') AND
								N_MON_ID = A.N_MON_ID AND S_MSG = concat(A.N_INDEX) AND S_PROCESS = 'SNMP')         ALM_CNT,
						 (SELECT GROUP_CONCAT(S_EXT_NUM ORDER BY S_EXT_NUM DESC SEPARATOR ', ')
						  FROM TB_SNMP_REAL_M02_EXT
						  WHERE N_MON_ID = A.N_MON_ID AND N_PHONE_INDEX = A.N_INDEX
						  GROUP BY N_MON_ID, N_PHONE_INDEX)                                                          S_EXT_NO,
						 (SELECT GROUP_CONCAT(S_EXT_NUM ORDER BY S_EXT_NUM DESC SEPARATOR ', ')
						  FROM TB_SNMP_REAL_M02_EXT
						  WHERE N_MON_ID = A.N_MON_ID AND N_PHONE_INDEX = A.N_INDEX
						  GROUP BY N_MON_ID, N_PHONE_INDEX)                                                          S_EXT_NO2
					   FROM
						 TB_SNMP_REAL_M02_PHONE A
					   WHERE
						 N_STATUS != 3
					   <if test="N_MON_ID != '' and N_MON_ID != null">
					   AND N_MON_ID = #{N_MON_ID}
					   </if>
					 ) A, (SELECT @ROWNUM := 0) R
				   ORDER BY
				   <if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}, N_INDEX</if>
				   <if test="order_id == null or order_id == ''">S_MAC_ADDR</if>
				 ) X
			LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M02PhoneInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02PhoneInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				(
					SELECT *
    				FROM
							(
								SELECT
										N_MON_ID, N_INDEX, S_NAME, S_MAC_ADDR, S_DESC, S_USER, S_IP, N_STATUS, D_REG_TIME
										, S_LOAD_ID, N_POOL_ID, N_INET_IP_TYPE, S_INET_ADDR, N_STATUS_REASON, D_REASON_TIME
										, S_PRODUCT_NAME, N_PHONE_PROTOCOL
										, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE = A.N_STATUS_REASON) S_STATUS_REASON
										, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_INET_IP_TYPE) S_INET_IP_TYPE
										, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_STATUS) S_STATUS
										, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '3' AND S_IN_VALUE = A.N_PHONE_PROTOCOL) S_PHONE_PROTOCOL
										, (SELECT COUNT(*) FROM TB_ALM_HISTORY WHERE S_ALM_KEY IN (SELECT S_ALM_KEY FROM TB_ALM WHERE N_ALM_STATUS > 1 AND N_ALM_TYPE = '14002' AND N_ALM_CODE LIKE '1___') AND N_MON_ID = A.N_MON_ID AND S_MSG = concat(A.N_INDEX, '') AND S_PROCESS = 'SNMP') ALM_CNT
										, (SELECT REVERSE(SUBSTR(REVERSE(XMLAGG(XMLELEMENT(x, CASE WHEN LENGTH(S_EXT_NUM) &lt; 7 THEN S_EXT_NUM ELSE '('||SUBSTR(S_EXT_NUM,1,1)||')'||SUBSTR(S_EXT_NUM,2,3)||'-'||SUBSTR(S_EXT_NUM,5) || ', ' END) ORDER BY S_EXT_NUM).EXTRACT('//text()').GetStringVal()),3)) FROM TB_SNMP_REAL_M02_EXT WHERE N_MON_ID = A.N_MON_ID AND N_PHONE_INDEX = A.N_INDEX GROUP BY N_MON_ID, N_PHONE_INDEX) S_EXT_NO
										, (SELECT REVERSE(SUBSTR(REVERSE(XMLAGG(XMLELEMENT(x, S_EXT_NUM || ', ') ORDER BY S_EXT_NUM).EXTRACT('//text()').GetStringVal()),3)) FROM TB_SNMP_REAL_M02_EXT WHERE N_MON_ID = A.N_MON_ID AND N_PHONE_INDEX = A.N_INDEX GROUP BY N_MON_ID, N_PHONE_INDEX) S_EXT_NO2
								FROM
										TB_SNMP_REAL_M02_PHONE A
								WHERE
										N_STATUS != 3
									<if test="N_MON_ID != '' and N_MON_ID != null">
										AND N_MON_ID = #{N_MON_ID}
									</if>
							) A
			) A
	</select>

	<select id="M02ExtInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02ExtInfoLstQry */
		SELECT *
		FROM (
			   SELECT
				 @ROWNUM := @ROWNUM + 1 AS NUM,
				 N_MON_ID,
				 N_INDEX,
				 N_MULTI,
				 N_PHONE_INDEX,
				 S_EXT_NUM,
				 N_IP_TYPE,
				 S_ADDR,
				 N_STATUS,
				 S_STATUS,
				 S_IP_TYPE,
				 S_MAC_ADDR,
				 S_MON_NAME
			   FROM
				 (
				   SELECT
					 N_MON_ID,
					 N_INDEX,
					 N_MULTI,
					 N_PHONE_INDEX,
					 CASE
					 WHEN LENGTH(S_EXT_NUM) &lt; 7 THEN S_EXT_NUM
					 WHEN S_EXT_NUM LIKE '8%'
					   THEN concat('(', SUBSTR(S_EXT_NUM, 1, 1), ')', SUBSTR(S_EXT_NUM, 2, 3), '-', SUBSTR(S_EXT_NUM, 5))
					 ELSE SUBSTR(S_EXT_NUM, LENGTH(S_EXT_NUM) - 3)
					 END                                                                                   S_EXT_NUM,
					 S_EXT_NUM                                                                             S_EXT_NUM2,
					 N_IP_TYPE,
					 N_STATUS,
					 (SELECT S_MON_NAME
					  FROM TB_MON_INFO
					  WHERE N_MON_ID = A.N_MON_ID)                                                         S_MON_NAME,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_STATUS)  S_STATUS,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_IP_TYPE) S_IP_TYPE,
					 (SELECT S_MAC_ADDR
					  FROM TB_SNMP_REAL_M02_PHONE
					  WHERE N_MON_ID = A.N_MON_ID AND N_INDEX = A.N_PHONE_INDEX)                           S_MAC_ADDR,
					 (SELECT S_IP
					  FROM TB_SNMP_REAL_M02_PHONE
					  WHERE N_MON_ID = A.N_MON_ID AND N_INDEX = A.N_PHONE_INDEX)                           S_ADDR
				   FROM
					 TB_SNMP_REAL_M02_EXT A
				   WHERE
					 N_STATUS != 3
				   <if test="N_MON_ID != '' and N_MON_ID != null">
				   AND N_MON_ID = #{N_MON_ID}
				   </if>
				 ) A, (SELECT @ROWNUM := 0) R
			   ORDER BY
			   <if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}, N_INDEX</if>
			   <if test="order_id == null or order_id == ''">S_EXT_NUM2</if>
			 ) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M02ExtInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02ExtInfoLstCntQry */
			SELECT
    				COUNT(*) CNT
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, N_MULTI, N_PHONE_INDEX
								, '('||SUBSTR(S_EXT_NUM,1,1)||')'||SUBSTR(S_EXT_NUM,2,3)||'-'||SUBSTR(S_EXT_NUM,5) S_EXT_NUM, S_EXT_NUM S_EXT_NUM2
								, N_IP_TYPE, N_STATUS
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_STATUS) S_STATUS
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_IP_TYPE) S_IP_TYPE
								, (SELECT S_MAC_ADDR FROM TB_SNMP_REAL_M02_PHONE WHERE N_MON_ID = A.N_MON_ID AND N_INDEX = A.N_PHONE_INDEX) S_MAC_ADDR
								, (SELECT S_IP FROM TB_SNMP_REAL_M02_PHONE WHERE N_MON_ID = A.N_MON_ID AND N_INDEX = A.N_PHONE_INDEX) S_ADDR
						FROM
								TB_SNMP_REAL_M02_EXT A
						WHERE
								N_STATUS != 3
							<if test="N_MON_ID != '' and N_MON_ID != null">
								AND N_MON_ID = #{N_MON_ID}
							</if>
					) A
	</select>

	<select id="M02GatewayInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02GatewayInfoLstQry */
		SELECT *
		FROM (
			   SELECT
				 CAST(@ROWNUM := @ROWNUM + 1 AS DECIMAL) AS NUM,
				 FOUND_ROWS()           AS TOTAL_COUNT,
				 N_MON_ID,
				 N_INDEX,
				 S_NAME,
				 N_TYPE,
				 S_DESC,
				 N_STATUS,
				 N_DEVICE_POOL,
				 N_INET_IP_TYPE,
				 S_INET_ADDR,
				 S_PRODUCT_NAME,
				 N_PRODUCT_ID,
				 N_STATUS_REASON,
				 D_REASON_TIME,
				 D_REG_TIME,
				 N_DCH_STATUS,
				 N_DCH_COUNT,
				 S_TYPE,
				 S_INET_IP_TYPE,
				 S_STATUS,
				 S_STATUS_REASON,
				 IP1,
				 IP2,
				 IP3,
				 IP4,
				 (SELECT S_MON_NAME
				  FROM TB_MON_INFO
				  WHERE S_MON_IP = S_INET_ADDR
				  LIMIT 1)                 S_MON_NAME
			   FROM
				 (
				   SELECT
					 N_MON_ID,
					 N_INDEX,
					 S_NAME,
					 N_TYPE,
					 S_DESC,
					 N_STATUS,
					 N_DEVICE_POOL,
					 N_INET_IP_TYPE,
					 S_INET_ADDR,
					 S_PRODUCT_NAME,
					 N_PRODUCT_ID,
					 N_STATUS_REASON,
					 D_REASON_TIME,
					 D_REG_TIME,
					 N_DCH_STATUS,
					 N_DCH_COUNT,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '11' AND S_IN_VALUE = A.N_TYPE)        S_TYPE,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_STATUS)       S_STATUS,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_INET_IP_TYPE) S_INET_IP_TYPE,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '5' AND S_IN_VALUE = A.N_PRODUCT_ID)   S_PRODUCT_ID,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE =
																				 A.N_STATUS_REASON)             S_STATUS_REASON,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE = A.N_DCH_STATUS)   S_DCH_STATUS,
					 CAST(substring_index(S_INET_ADDR, '.', 1) AS DECIMAL)                                      IP1,
					 CAST(substring_index(substring_index(S_INET_ADDR, '.', -3), '.', 1) AS DECIMAL)            IP2,
					 CAST(substring_index(substring_index(S_INET_ADDR, '.', -2), '.', 1) AS DECIMAL)            IP3,
					 CAST(substring_index(substring_index(S_INET_ADDR, '.', -3), '.', 1) AS DECIMAL)            IP4
				   FROM
					 TB_SNMP_REAL_M02_GW A
				   WHERE
					 N_MON_ID = #{N_MON_ID}
				   <if test="S_INET_ADDR != '' and S_INET_ADDR != null">
				   AND A.S_INET_ADDR LIKE concat('%' , #{S_INET_ADDR} , '%')
				   </if>
				   <if test="N_STATUS != '' and N_STATUS != null">
				   AND A.N_STATUS LIKE concat('%' , #{N_STATUS} , '%')
				   </if>
				 ) A, (SELECT @ROWNUM := 0) R
			   ORDER BY
			   <if test="sort == null">N_INDEX</if>
			   <if test="sort != null">
			   		<choose>
			   			<when test="sort.size() == 0">
			   				N_INDEX
			   			</when>
						<otherwise>
							<include refid="SQL_OderBy"/>
						</otherwise>
			   		</choose>
			   </if>
			 ) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M02GatewayInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02GatewayInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M02_GW
		WHERE
				N_MON_ID = #{N_MON_ID}
		<if test="S_INET_ADDR != '' and S_INET_ADDR != null">
			AND S_INET_ADDR LIKE '%' || #{S_INET_ADDR} || '%'
		</if>
		<if test="N_STATUS != '' and N_STATUS != null">
			AND N_STATUS LIKE '%' || #{N_STATUS} || '%'
		</if>
	</select>

	<select id="M02TrunkInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02TrunkInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INDEX</if>
    								   ) NUM
    				, N_MON_ID, N_INDEX, S_NAME, N_TYPE, N_GW_NUM, N_STATUS
    				, S_TYPE, S_STATUS
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, S_NAME, N_TYPE, N_GW_NUM, N_STATUS
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '5' AND S_IN_VALUE = A.N_TYPE) S_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_STATUS) S_STATUS
						FROM
								TB_SNMP_REAL_M02_TRUNK A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M02TrunkInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02TrunkInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M02_TRUNK
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M02CtiInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02CtiInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INDEX</if>
    								   ) NUM
    				, N_MON_ID, N_INDEX, S_NAME, N_TYPE, S_DESC, N_STATUS, N_DEV_POOL_INDEX
    				, N_INET_IP_TYPE, S_INET_ADDR, S_APP_INFO, N_STATUS_REASON, D_REASON_TIME
    				, D_REG_TIME, S_PRODUCT_NAME
    				, S_TYPE, S_INET_IP_TYPE, S_STATUS, S_STATUS_REASON
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, S_NAME, N_TYPE, S_DESC, N_STATUS, N_DEV_POOL_INDEX
    							, N_INET_IP_TYPE, S_INET_ADDR, S_APP_INFO, N_STATUS_REASON, D_REASON_TIME
    							, D_REG_TIME, S_PRODUCT_NAME
    							, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '4' AND S_IN_VALUE = A.N_TYPE) S_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_INET_IP_TYPE) S_INET_IP_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_STATUS) S_STATUS
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE = A.N_STATUS_REASON) S_STATUS_REASON
						FROM
								TB_SNMP_REAL_M02_CTI A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M02CtiInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02CtiInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M02_CTI
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M02H323InfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02H323InfoLstQry */
		SELECT *
		FROM (
			   SELECT
				 CAST(@ROWNUM := @ROWNUM + 1 AS DECIMAL) AS NUM,
				 FOUND_ROWS()                            AS TOTAL_COUNT,
				 N_MON_ID,
				 N_INDEX,
				 S_NAME,
				 N_PRODUCT_ID,
				 S_DESC,
				 N_STATUS,
				 N_INET_IP_TYPE,
				 S_INET_ADDR,
				 N_GK_IP_TYPE,
				 S_GK_ADDR,
				 N_GK_INET_IP_TYPE_01,
				 S_GK_INET_ADDR_01,
				 N_GK_INET_IP_TYPE_02,
				 S_GK_INET_ADDR_02,
				 N_GK_INET_IP_TYPE_03,
				 S_GK_INET_ADDR_03,
				 N_GK_INET_IP_TYPE_04,
				 S_GK_INET_ADDR_04,
				 N_GK_INET_IP_TYPE_05,
				 S_GK_INET_ADDR_05,
				 N_GK_INET_IP_TYPE_06,
				 S_GK_INET_ADDR_06,
				 N_REMOTE_CM_IP_TYPE_01,
				 S_REMOTE_CM_ADDR_01,
				 N_REMOTE_CM_IP_TYPE_02,
				 S_REMOTE_CM_ADDR_02,
				 N_REMOTE_CM_IP_TYPE_03,
				 S_REMOTE_CM_ADDR_03,
				 N_STATUS_REASON,
				 D_REASON_TIME,
				 D_REG_TIME,
				 S_PRODUCT_NAME,
				 S_STATUS,
				 S_INET_IP_TYPE,
				 S_GK_IP_TYPE,
				 S_GK_INET_IP_TYPE_01,
				 S_GK_INET_IP_TYPE_02,
				 S_GK_INET_IP_TYPE_03,
				 S_GK_INET_IP_TYPE_04,
				 S_GK_INET_IP_TYPE_05,
				 S_GK_INET_IP_TYPE_06,
				 S_REMOTE_CM_IP_TYPE_01,
				 S_REMOTE_CM_IP_TYPE_02,
				 S_REMOTE_CM_IP_TYPE_03,
				 S_STATUS_REASON,
				 S_PRODUCT_ID
			   FROM
				 (
				   SELECT
					 N_MON_ID,
					 N_INDEX,
					 S_NAME,
					 N_PRODUCT_ID,
					 S_DESC,
					 N_STATUS,
					 N_INET_IP_TYPE,
					 S_INET_ADDR,
					 N_GK_IP_TYPE,
					 S_GK_ADDR,
					 N_GK_INET_IP_TYPE_01,
					 S_GK_INET_ADDR_01,
					 N_GK_INET_IP_TYPE_02,
					 S_GK_INET_ADDR_02,
					 N_GK_INET_IP_TYPE_03,
					 S_GK_INET_ADDR_03,
					 N_GK_INET_IP_TYPE_04,
					 S_GK_INET_ADDR_04,
					 N_GK_INET_IP_TYPE_05,
					 S_GK_INET_ADDR_05,
					 N_GK_INET_IP_TYPE_06,
					 S_GK_INET_ADDR_06,
					 N_REMOTE_CM_IP_TYPE_01,
					 S_REMOTE_CM_ADDR_01,
					 N_REMOTE_CM_IP_TYPE_02,
					 S_REMOTE_CM_ADDR_02,
					 N_REMOTE_CM_IP_TYPE_03,
					 S_REMOTE_CM_ADDR_03,
					 N_STATUS_REASON,
					 D_REASON_TIME,
					 D_REG_TIME,
					 S_PRODUCT_NAME,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_PRODUCT_ID)    S_PRODUCT_ID,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_STATUS)        S_STATUS,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_INET_IP_TYPE)  S_INET_IP_TYPE,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_GK_IP_TYPE)    S_GK_IP_TYPE,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE =
																				 A.N_GK_INET_IP_TYPE_01)         S_GK_INET_IP_TYPE_01,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE =
																				 A.N_GK_INET_IP_TYPE_02)         S_GK_INET_IP_TYPE_02,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE =
																				 A.N_GK_INET_IP_TYPE_03)         S_GK_INET_IP_TYPE_03,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE =
																				 A.N_GK_INET_IP_TYPE_04)         S_GK_INET_IP_TYPE_04,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE =
																				 A.N_GK_INET_IP_TYPE_05)         S_GK_INET_IP_TYPE_05,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE =
																				 A.N_GK_INET_IP_TYPE_06)         S_GK_INET_IP_TYPE_06,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE =
																				 A.N_REMOTE_CM_IP_TYPE_01)       S_REMOTE_CM_IP_TYPE_01,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE =
																				 A.N_REMOTE_CM_IP_TYPE_02)       S_REMOTE_CM_IP_TYPE_02,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE =
																				 A.N_REMOTE_CM_IP_TYPE_03)       S_REMOTE_CM_IP_TYPE_03,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE = A.N_STATUS_REASON) S_STATUS_REASON
				   FROM
					 TB_SNMP_REAL_M02_H323 A, (SELECT @ROWNUM := 0) R
				   WHERE
					 N_MON_ID = #{N_MON_ID}
				 ) A
			   ORDER BY
			   <if test="sort == null">N_INDEX</if>
			   <if test="sort != null">
				   <choose>
					   <when test="sort.size() == 0">
					   		N_INDEX
					   </when>
					   <otherwise>
						   <include refid="SQL_OderBy"/>
					   </otherwise>
				   </choose>
			   </if>
			 ) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M02H323InfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02H323InfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M02_H323
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M02VmInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02VmInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INDEX</if>
    								   ) NUM
    				, N_MON_ID, N_INDEX, S_NAME, N_TYPE, S_DESC
					, N_STATUS, N_INET_IP_TYPE, S_INET_ADDR
					, N_STATUS_REASON, D_REASON_TIME, D_REG_TIME, S_PRODUCT_NAME
					, S_TYPE, S_STATUS, S_INET_IP_TYPE, S_STATUS_REASON
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, S_NAME, N_TYPE, S_DESC
								, N_STATUS, N_INET_IP_TYPE, S_INET_ADDR
								, N_STATUS_REASON, D_REASON_TIME, D_REG_TIME, S_PRODUCT_NAME
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '10' AND S_IN_VALUE = A.N_TYPE) S_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_STATUS) S_STATUS
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_INET_IP_TYPE) S_INET_IP_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE = A.N_STATUS_REASON) S_STATUS_REASON
						FROM
								TB_SNMP_REAL_M02_VM A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M02VmInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02VmInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M02_VM
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M02GkInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02GkInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INDEX</if>
    								   ) NUM
    				, N_MON_ID, N_INDEX, S_NAME, N_TYPE, S_DESC
					, N_STATUS, N_DEV_POOL_INDEX, N_INET_IP_TYPE, S_INET_ADDR
					, S_TYPE, S_INET_IP_TYPE, S_STATUS
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, S_NAME, N_TYPE, S_DESC
								, N_STATUS, N_DEV_POOL_INDEX, N_INET_IP_TYPE, S_INET_ADDR
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '8' AND S_IN_VALUE = A.N_TYPE) S_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_INET_IP_TYPE) S_INET_IP_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '7' AND S_IN_VALUE = A.N_STATUS) S_STATUS
						FROM
								TB_SNMP_REAL_M02_GK A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M02GkInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02GkInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M02_GK
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M02MediaInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02MediaInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INDEX</if>
    								   ) NUM
    				, N_MON_ID, N_INDEX, S_NAME, N_TYPE, S_DESC, N_STATUS
					, N_POOL_INDEX, N_INET_IP_TYPE, S_INET_ADDR
					, N_STATUS_REASON, D_REASON_TIME, D_REG_TIME, S_PRODUCT_NAME
					, S_TYPE, S_INET_IP_TYPE, S_STATUS, S_STATUS_REASON
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, S_NAME, N_TYPE, S_DESC, N_STATUS
								, N_POOL_INDEX, N_INET_IP_TYPE, S_INET_ADDR
								, N_STATUS_REASON, D_REASON_TIME, D_REG_TIME, S_PRODUCT_NAME
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '6' AND S_IN_VALUE = A.N_TYPE) S_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_INET_IP_TYPE) S_INET_IP_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_STATUS) S_STATUS
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE = A.N_STATUS_REASON) S_STATUS_REASON
						FROM
								TB_SNMP_REAL_M02_MEDIA A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M02MediaInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02MediaInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M02_MEDIA
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M02SipInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02SipInfoLstQry */
		SELECT *
		FROM (
			   SELECT
				 CAST(@ROWNUM := @ROWNUM + 1 AS DECIMAL) AS NUM,
				 FOUND_ROWS()                            AS TOTAL_COUNT,
				 N_MON_ID,
				 N_INDEX,
				 S_NAME,
				 S_PRODUCT_NAME,
				 S_DESC,
				 N_INET_IP_TYPE,
				 S_INET_ADDR,
				 N_IN_PROTOCOL,
				 N_IN_PORT,
				 N_OUT_PROTOCOL,
				 N_OUT_PORT,
				 S_INET_IP_TYPE,
				 S_IN_PROTOCOL,
				 S_OUT_PROTOCOL
			   FROM
				 (
				   SELECT
					 N_MON_ID,
					 N_INDEX,
					 S_NAME,
					 S_PRODUCT_NAME,
					 S_DESC,
					 N_INET_IP_TYPE,
					 S_INET_ADDR                                                                                S_TMP_IP,
					 N_IN_PROTOCOL,
					 N_IN_PORT,
					 N_OUT_PROTOCOL,
					 N_OUT_PORT,
					 S_INET_ADDR,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_INET_IP_TYPE) S_INET_IP_TYPE,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '6' AND S_IN_VALUE = A.N_IN_PROTOCOL)  S_IN_PROTOCOL,
					 (SELECT S_OUT_VALUE
					  FROM TB_SNMP_VALUE_TYPE_CODE
					  WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '8' AND S_IN_VALUE = A.N_OUT_PROTOCOL) S_OUT_PROTOCOL
				   FROM
					 TB_SNMP_REAL_M02_SIP A, (SELECT @ROWNUM := 0) R
				   WHERE
					 N_MON_ID = #{N_MON_ID}
				 ) A
			   ORDER BY
			   <if test="sort == null">N_INDEX</if>
			   <if test="sort != null">
				   <choose>
					   <when test="sort.size() == 0">
					   		N_INDEX
					   </when>
					   <otherwise>
					   		<include refid="SQL_OderBy"/>
					   </otherwise>
				   </choose>
			   </if>
			 ) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M02SipInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02SipInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M02_SIP
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M02SwInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02SwInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INDEX</if>
    								   ) NUM
    				, N_MON_ID, N_INDEX, S_NAME, N_TYPE
					, S_DESC, N_STATUS, S_VERSION
					, S_TYPE, S_STATUS
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, S_NAME, N_TYPE
								, S_DESC, N_STATUS, S_VERSION
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '13' AND S_IN_VALUE = A.N_TYPE) S_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '14' AND S_IN_VALUE = A.N_STATUS) S_STATUS
						FROM
								TB_SNMP_REAL_M02_SW A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M02SwInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02SwInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M02_SW
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M02NicInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02NicInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INDEX</if>
    								   ) NUM
    				, N_MON_ID, N_INDEX, S_MAC_ADDR, S_NAME
					, N_SLOT, N_CONDITION, N_STATE, N_STATUS
					, N_TRANS_GOOD, N_TRANS_BAD, N_RECV_GOOD
					, N_RECV_BAD, S_FIRM_VER, N_SPEED
					, S_CONDITION, S_STATE, S_STATUS
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, S_MAC_ADDR, S_NAME
								, N_SLOT, N_CONDITION, N_STATE, N_STATUS
								, N_TRANS_GOOD, N_TRANS_BAD, N_RECV_GOOD
								, N_RECV_BAD, S_FIRM_VER, N_SPEED
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '15' AND S_IN_VALUE = A.N_CONDITION) S_CONDITION
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '16' AND S_IN_VALUE = A.N_STATE) S_STATE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '2' AND N_SNMP_TYPE_CODE = '17' AND S_IN_VALUE = A.N_STATUS) S_STATUS
						FROM
								TB_SNMP_REAL_M02_NIC A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M02NicInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M02NicInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M02_NIC
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<!-- M03 VG 장비 -->
	<select id="SnmpM03InfoQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.SnmpM03InfoQry */
		SELECT
                N_MON_ID, S_NAME, S_MODEL, N_IF_CNT
                , (SELECT COUNT(*) FROM TB_SNMP_REAL_M03_DSP WHERE N_MON_ID = A.N_MON_ID) DSP_CNT
                , (SELECT COUNT(*) FROM TB_SNMP_REAL_M03_ENV_FAN WHERE N_MON_ID = A.N_MON_ID) ENV_FAN_CNT
                , (SELECT COUNT(*) FROM TB_SNMP_REAL_M03_ENV_POWER WHERE N_MON_ID = A.N_MON_ID) ENV_POWER_CNT
                , (SELECT COUNT(*) FROM TB_SNMP_REAL_M03_ENV_TEMP WHERE N_MON_ID = A.N_MON_ID) ENV_TEMP_CNT
                , (SELECT COUNT(*) FROM TB_SNMP_REAL_M03_ENV_VOLT WHERE N_MON_ID = A.N_MON_ID) ENV_VOLT_CNT
                , (SELECT COUNT(*) CNT FROM TB_SNMP_REAL_M03_IF WHERE N_MON_ID = A.N_MON_ID AND N_TYPE IN (6, 24) AND N_SPEED > 0) N_IF_CNT
		        , (SELECT COUNT(*) CNT FROM TB_SNMP_REAL_M03_IF WHERE N_MON_ID = A.N_MON_ID AND N_TYPE IN (6, 24) AND N_SPEED > 0 AND N_OPER_STATUS = 1) N_OPER_CNT1
		        , (SELECT COUNT(*) CNT FROM TB_SNMP_REAL_M03_IF WHERE N_MON_ID = A.N_MON_ID AND N_TYPE IN (6, 24) AND N_SPEED > 0 AND N_OPER_STATUS != 1) N_OPER_CNT2                
                , (SELECT COUNT(*) FROM TB_SNMP_REAL_M03_ISDN WHERE N_MON_ID = A.N_MON_ID) ISDN_CNT
                , (SELECT COUNT(*) FROM TB_SNMP_REAL_M03_VAIF WHERE N_MON_ID = A.N_MON_ID) VAIF_CNT
                , (SELECT COUNT(*) FROM TB_SNMP_REAL_M03_IF WHERE N_MON_ID = A.N_MON_ID AND N_TYPE = 18) PRI_CNT

        FROM
                TB_SNMP_REAL_M03_DEFAULT A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M03DspInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03DspInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
												<if test="sort == null">N_INDEX</if>
												<if test="sort != null">
													<choose>
														<when test="sort.size() == 0">
															N_INDEX
														</when>
														<otherwise>
															<include refid="SQL_OderBy"/>
														</otherwise>
													</choose>
												</if>) NUM
					, FOUND_ROWS() AS TOTAL_COUNT
    				, A.*
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, N_OPER_STATE, N_ALARMS, N_LAST_ALM_CAUSE
								, S_LAST_ALM_CAUSE_TXT, D_LAST_ALM_TIME, N_TOTAL_CH, N_IN_USE_CH, N_ACTIVE_CH
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '3' AND S_IN_VALUE = A.N_OPER_STATE) S_OPER_STATE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '4' AND S_IN_VALUE = A.N_LAST_ALM_CAUSE) S_LAST_ALM_CAUSE
						FROM
								TB_SNMP_REAL_M03_DSP A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE num BETWEEN #{firstRecordIndex} + 1 AND #{lastRecordIndex}
		
		
		
		
	</select>

	<select id="M03DspInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03DspInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M03_DSP
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M03EnvFanInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03EnvFanInfoLstQry */
		SELECT * FROM (
    		SELECT
    				@NUM AS TOTAL_COUNT, A.*
    		FROM
					(
						SELECT
								@NUM := @NUM + 1 AS NUM
								, N_MON_ID, N_INDEX, S_DESC, N_STATE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '10' AND S_IN_VALUE = A.N_STATE) S_STATE
						FROM
								TB_SNMP_REAL_M03_ENV_FAN A, (SELECT @NUM := 0) R
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M03EnvFanInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03EnvFanInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M03_ENV_FAN
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M03EnvPowerInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03EnvPowerInfoLstQry */
		SELECT * FROM (
    		SELECT
    				@NUM AS TOTAL_COUNT, A.*
    		FROM
					(
						SELECT	@NUM := @NUM + 1 AS NUM
								, N_MON_ID, N_INDEX, S_DESC, N_STATE, N_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '10' AND S_IN_VALUE = A.N_STATE) S_STATE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '11' AND S_IN_VALUE = A.N_TYPE) S_TYPE
						FROM
								TB_SNMP_REAL_M03_ENV_POWER A, (SELECT @NUM := 0) R
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M03EnvPowerInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03EnvPowerInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M03_ENV_POWER
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M03EnvTempInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
	/* server_detail.M03EnvTempInfoLstQry */
		SELECT * FROM (
    		SELECT
    				@NUM AS TOTAL_COUNT, A.*
    		FROM
					(
						SELECT	@NUM := @NUM + 1 AS NUM
								, N_MON_ID, N_INDEX, S_DESC, N_STATUS_VALUE, N_THRES_HOLD, N_LAST_SHUTDOWN, N_STATE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '10' AND S_IN_VALUE = A.N_STATE) S_STATE
						FROM
								TB_SNMP_REAL_M03_ENV_TEMP A, (SELECT @NUM := 0) R
						WHERE
								N_MON_ID = #{N_MON_ID}
			) A
			ORDER BY N_INDEX
		) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M03EnvTempInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03EnvTempInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M03_ENV_TEMP
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M03EnvVoltInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03EnvVoltInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY N_INDEX) NUM,
    				FOUND_ROWS() AS TOTAL_COUNT,
    				A.*
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, S_DESC, N_STATUS_VALUE, N_THRES_HOLD_LOW, N_THRES_HOLD_HIGH
								, N_LAST_SHOW_DOWN, N_STATE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '10' AND S_IN_VALUE = A.N_STATE) S_STATE
								, SUBSTR(N_THRES_HOLD_HIGH, 1, LENGTH(N_THRES_HOLD_HIGH)-3) || '.' || SUBSTR(N_THRES_HOLD_HIGH, LENGTH(N_THRES_HOLD_HIGH)-3+1) N_THRES_HOLD_HIGH_V
								, SUBSTR(N_STATUS_VALUE, 1, LENGTH(N_STATUS_VALUE)-3) || '.' || SUBSTR(N_STATUS_VALUE, LENGTH(N_STATUS_VALUE)-3+1) N_STATUS_VALUE_V
								, SUBSTR(N_THRES_HOLD_LOW, 1, LENGTH(N_THRES_HOLD_LOW)-3) || '.' || SUBSTR(N_THRES_HOLD_LOW, LENGTH(N_THRES_HOLD_LOW)-3+1) N_THRES_HOLD_LOW_V
						FROM
								TB_SNMP_REAL_M03_ENV_VOLT A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE num BETWEEN #{firstRecordIndex} + 1 AND #{lastRecordIndex}
	</select>

	<select id="M03EnvVoltInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03EnvVoltInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M03_ENV_VOLT
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M03IfInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
				SELECT @NUM AS TOTAL_COUNT, X.* FROM (
    		SELECT
    				@NUM := @NUM + 1 AS NUM, A.*
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, S_DESC, N_TYPE, N_MTU, N_SPEED, S_PHYTS_ADDR
								, N_ADMIN_STATUS, N_OPER_STATUS
								, DATE_FORMAT(D_INS_DATE, '%Y-%m-%d %H:%i:%s') AS D_INS_DATE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE = A.N_TYPE) S_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_ADMIN_STATUS) S_ADMIN_STATUS
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_OPER_STATUS) S_OPER_STATUS
								, S_ALIAS
						FROM
								TB_SNMP_REAL_M03_IF A
						WHERE
								N_MON_ID = #{N_MON_ID}
								AND N_TYPE IN (6, 24)
								AND N_SPEED > 0
					) A, (SELECT @NUM := 0) R
			ORDER BY
			<if test="sort == null">N_INDEX, D_INS_DATE DESC</if>
				<if test="sort != null">
					<choose>
						<when test="sort.size() == 0">
							N_INDEX, D_INS_DATE DESC
						</when>
						<otherwise>
							<include refid="SQL_OderBy"/>
						</otherwise>
					</choose>
			</if>
		) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M03IfInfoPRILstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03IfInfoPRILstQry */
		SELECT @NUM AS TOTAL_COUNT, X.* FROM (
    		SELECT
    				@NUM := @NUM + 1 AS NUM, A.*
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, S_DESC, N_TYPE, N_MTU, N_SPEED, S_PHYTS_ADDR
								, N_ADMIN_STATUS, N_OPER_STATUS
								, DATE_FORMAT(D_INS_DATE, '%Y-%m-%d %H:%i:%s') AS D_INS_DATE
								, (SELECT COUNT(*) FROM tb_snmp_real_m03_e1_status WHERE N_MON_ID = A.N_MON_ID AND N_GRP_INDEX = A.N_INDEX) N_TOTAL
								, (SELECT COUNT(*) FROM tb_snmp_real_m03_e1_status WHERE N_MON_ID = A.N_MON_ID AND N_GRP_INDEX = A.N_INDEX AND N_STATUS = 1) N_E1_CNT_IDLE
								, (SELECT COUNT(*) FROM tb_snmp_real_m03_e1_status WHERE N_MON_ID = A.N_MON_ID AND N_GRP_INDEX = A.N_INDEX AND N_STATUS > 1) N_E1_CNT_ACTIVE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE = A.N_TYPE) S_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_ADMIN_STATUS) S_ADMIN_STATUS
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_OPER_STATUS) S_OPER_STATUS
								, S_ALIAS
						FROM
								TB_SNMP_REAL_M03_IF A
						WHERE
								N_MON_ID = #{N_MON_ID}
								AND N_TYPE = 18
					) A, (SELECT @NUM := 0) R
			ORDER BY
			<if test="sort == null">N_INDEX, D_INS_DATE DESC</if>
				<if test="sort != null">
					<choose>
						<when test="sort.size() == 0">
							N_INDEX, D_INS_DATE DESC
						</when>
						<otherwise>
							<include refid="SQL_OderBy"/>
						</otherwise>
					</choose>
			</if>
		) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M03E1StatusQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03E1StatusQry */
		SELECT
        		(SELECT S_DESC FROM TB_SNMP_REAL_M03_IF WHERE N_MON_ID = A.N_MON_ID AND N_INDEX = A.N_INDEX) S_DESC
        		, A.N_MON_ID, A.N_GRP_INDEX, A.N_INDEX, N_STATUS
		FROM
		        TB_SNMP_REAL_M03_E1_STATUS A
		WHERE
		        N_MON_ID = #{N_MON_ID} AND N_GRP_INDEX = #{N_GRP_INDEX}
		ORDER BY
		        N_INDEX
	</select>

	<select id="M03IfInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03IfInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M03_IF
		WHERE
				N_MON_ID = #{N_MON_ID}
		AND		N_TYPE IN (6, 24)
	</select>
	<select id="M03IfInfoPRILstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03IfInfoPRILstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M03_IF
		WHERE
				N_MON_ID = #{N_MON_ID}
		AND		N_TYPE = 18
	</select>

	<select id="M03IsdnInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03IsdnInfoLstQry */
		SELECT @NUM AS TOTAL_COUNT, X.* FROM (
    		SELECT
    				@NUM := @NUM + 1 AS NUM, A.*
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, N_PHYS_IF, N_ID, N_LOG_IF, S_NAME, S_ADDR
								, N_PERMISNION, N_MAX_DURATION, N_LAST_DURATION, S_CLEAR_REASON
								, S_CLEAR_CODE, N_SUC_CALLS, N_FAIL_CALL, N_ACCEP_CALL, N_REFUSE_CALL
								, D_LAST_ATT_TIME, N_STATUS, N_CALL_ORIGIN
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '5' AND S_IN_VALUE = A.N_PERMISNION) S_PERMISSION
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '6' AND S_IN_VALUE = A.N_STATUS) S_STATUS
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '7' AND S_IN_VALUE = A.N_CALL_ORIGIN) S_CALL_ORIGIN
						FROM
								TB_SNMP_REAL_M03_ISDN A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M03IsdnInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03IsdnInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M03_ISDN
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M03VaifInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03VaifInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
												<if test="sort == null">S_DESC</if>
												<if test="sort != null">
													<choose>
														<when test="sort.size() == 0">
															S_DESC
														</when>
														<otherwise>
															<include refid="SQL_OderBy"/>
														</otherwise>
													</choose>
												</if>) NUM
					, FOUND_ROWS() AS TOTAL_COUNT
    				, A.*
    		FROM
					(

						select
								b.S_DESC, b.n_admin_status N_ADMIN_STATUS, b.n_oper_status N_OPER_STATUS, a.n_type N_TYPE, a.n_erros N_ERROS, a.S_TEL_NUM, a.S_NAME
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = b.n_admin_status) S_ADMIN_STATUS
								, (SELECT CASE WHEN S_OUT_VALUE = '연결 됨' THEN '통화중' ELSE S_OUT_VALUE END FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = b.n_oper_status) S_OPER_STATUS
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '3' AND N_SNMP_TYPE_CODE = '8' AND S_IN_VALUE = a.n_type) S_TYPE
						from
								tb_snmp_real_m03_vaif a inner join tb_snmp_real_m03_if b
						on a.n_mon_id = b.n_mon_id
						and a.n_index = b.n_index
						and a.n_mon_id = #{N_MON_ID}
						and b.n_type = 102

					) A
		) X
		WHERE num BETWEEN #{firstRecordIndex} + 1 AND #{lastRecordIndex}
	</select>

	<select id="M03VaifInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M03VaifInfoLstCntQry */
		select
				COUNT(*) CNT
		from
				tb_snmp_real_m03_vaif a inner join tb_snmp_real_m03_if b
		on a.n_mon_id = b.n_mon_id
		and a.n_index = b.n_index
		and a.n_mon_id = #{N_MON_ID}
		and b.n_type = 102
	</select>


	<!-- M04 Switch 장비 -->
	<select id="SnmpM04InfoQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.SnmpM04InfoQry */
		SELECT
		        N_MON_ID, S_NAME, S_DESC, N_PORT_CNT
		        , (SELECT COUNT(*) CNT FROM TB_SNMP_REAL_M04_IF WHERE N_MON_ID = A.N_MON_ID) N_IF_CNT
		        , (SELECT COUNT(*) CNT FROM TB_SNMP_REAL_M04_IF WHERE N_MON_ID = A.N_MON_ID AND N_OPER_STATUS = 1) N_OPER_CNT1
		        , (SELECT COUNT(*) CNT FROM TB_SNMP_REAL_M04_IF WHERE N_MON_ID = A.N_MON_ID AND N_OPER_STATUS != 1) N_OPER_CNT2
		FROM
		        TB_SNMP_REAL_M04_DEFAULT A
		WHERE
		        N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M04IfInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M04IfInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M04_IF
		WHERE
				N_MON_ID = #{N_MON_ID}

	</select>

	<select id="M04TrafficUsageQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M04TrafficUsageQry */
		SELECT
		        DATE_FORMAT(D_DATE, '%Y%m%d') N_DAY
		        , SUM(CASE WHEN S_HOUR = '00' THEN #{S_COLUMN} ELSE 0 END) TIME_00
		        , SUM(CASE WHEN S_HOUR = '01' THEN #{S_COLUMN} ELSE 0 END) TIME_01
		        , SUM(CASE WHEN S_HOUR = '02' THEN #{S_COLUMN} ELSE 0 END) TIME_02
		        , SUM(CASE WHEN S_HOUR = '03' THEN #{S_COLUMN} ELSE 0 END) TIME_03
		        , SUM(CASE WHEN S_HOUR = '04' THEN #{S_COLUMN} ELSE 0 END) TIME_04
		        , SUM(CASE WHEN S_HOUR = '05' THEN #{S_COLUMN} ELSE 0 END) TIME_05
		        , SUM(CASE WHEN S_HOUR = '06' THEN #{S_COLUMN} ELSE 0 END) TIME_06
		        , SUM(CASE WHEN S_HOUR = '07' THEN #{S_COLUMN} ELSE 0 END) TIME_07
		        , SUM(CASE WHEN S_HOUR = '08' THEN #{S_COLUMN} ELSE 0 END) TIME_08
		        , SUM(CASE WHEN S_HOUR = '09' THEN #{S_COLUMN} ELSE 0 END) TIME_09
		        , SUM(CASE WHEN S_HOUR = '10' THEN #{S_COLUMN} ELSE 0 END) TIME_10
		        , SUM(CASE WHEN S_HOUR = '11' THEN #{S_COLUMN} ELSE 0 END) TIME_11
		        , SUM(CASE WHEN S_HOUR = '12' THEN #{S_COLUMN} ELSE 0 END) TIME_12
		        , SUM(CASE WHEN S_HOUR = '13' THEN #{S_COLUMN} ELSE 0 END) TIME_13
		        , SUM(CASE WHEN S_HOUR = '14' THEN #{S_COLUMN} ELSE 0 END) TIME_14
		        , SUM(CASE WHEN S_HOUR = '15' THEN #{S_COLUMN} ELSE 0 END) TIME_15
		        , SUM(CASE WHEN S_HOUR = '16' THEN #{S_COLUMN} ELSE 0 END) TIME_16
		        , SUM(CASE WHEN S_HOUR = '17' THEN #{S_COLUMN} ELSE 0 END) TIME_17
		        , SUM(CASE WHEN S_HOUR = '18' THEN #{S_COLUMN} ELSE 0 END) TIME_18
		        , SUM(CASE WHEN S_HOUR = '19' THEN #{S_COLUMN} ELSE 0 END) TIME_19
		        , SUM(CASE WHEN S_HOUR = '20' THEN #{S_COLUMN} ELSE 0 END) TIME_20
		        , SUM(CASE WHEN S_HOUR = '21' THEN #{S_COLUMN} ELSE 0 END) TIME_21
		        , SUM(CASE WHEN S_HOUR = '22' THEN #{S_COLUMN} ELSE 0 END) TIME_22
		        , SUM(CASE WHEN S_HOUR = '23' THEN #{S_COLUMN} ELSE 0 END) TIME_23
		FROM
		        (
		            SELECT
		                    N_MON_ID, N_INDEX, D_DATE, #{S_COLUMN}
		                    , TO_CHAR(D_DATE, 'hh24') S_HOUR
		            FROM
		                    TB_SNMP_REAL_M04_TRAFFIC_YEAR
		            WHERE
		                    N_MON_ID = #{N_MON_ID}
		            AND     N_INDEX = #{N_INDEX}
		            AND     D_DATE BETWEEN TO_DATE(#{N_DAY} || '000000', 'yyyymmddhh24miss') AND TO_DATE(#{N_DAY} || '235959', 'yyyymmddhh24miss')
		            ORDER BY
		                    TO_CHAR(D_DATE, 'hh24')
		) A
		GROUP BY
				DATE_FORMAT(D_DATE, '%Y%m%d')
	</select>

	<select id="qry_combo_m04_if" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.qry_combo_m04_if */
		SELECT
		        N_INDEX CODE, S_DESC VAL
		FROM
		        TB_SNMP_REAL_M04_IF
		WHERE
		        N_MON_ID = #{N_MON_ID}
		        
		ORDER BY
		        N_INDEX
	</select>

	<select id="MonAccessLogLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.MonAccessLogLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc} , D_IN_DATE DESC</if>
    										<if test="order_id == null or order_id == ''">D_IN_DATE DESC</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
						        N_MON_ID, S_USER_ID, D_IN_DATE
						        , O_NET_ADDR, O_NET_PORT, N_TYPE
						        , (SELECT S_MON_NAME FROM TB_MON_INFO WHERE N_MON_ID = A.N_MON_ID) S_MON_NAME
						        , CASE WHEN N_TYPE = 1 THEN '로그인' ELSE '로그아웃' END S_TYPE
						FROM
						        TB_MON_ACCESS_INFO A
						WHERE
						        N_MON_ID = #{N_MON_ID}
						AND		D_IN_DATE BETWEEN TO_DATE(#{N_DAY} || '000000', 'yyyymmddhh24miss') AND TO_DATE(#{N_DAY} || '235959', 'yyyymmddhh24miss')
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="MonAccessLogLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.MonAccessLogLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
		        TB_MON_ACCESS_INFO
		WHERE
		        N_MON_ID = #{N_MON_ID}
		AND		D_IN_DATE BETWEEN TO_DATE(#{N_DAY} || '000000', 'yyyymmddhh24miss') AND TO_DATE(#{N_DAY} || '235959', 'yyyymmddhh24miss')
	</select>

	<select id="cmb_cdr_branch2_phone" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.cmb_cdr_branch2_phone */
		SELECT
				*
		FROM
		(
				SELECT
						'-1' CODE, '전체(' || (
		  					SELECT COUNT(*) FROM TB_SNMP_REAL_M02_PHONE
		  					WHERE
		  						N_STATUS != 3
		  						<if test="N_MON_ID != null and N_MON_ID != ''">
		  							AND N_MON_ID = #{N_MON_ID}
		  						</if>
		  				) || ')' VAL
				FROM
						dual
				UNION
				SELECT
				        '-2' CODE
				        , '본점'||'('||COUNT(*)||')' VAL
				FROM
				        (
				            SELECT * FROM TB_SNMP_REAL_M02_PHONE A LEFT OUTER JOIN TB_SNMP_REAL_M02_EXT B ON A.N_MON_ID = B.N_MON_ID AND A.N_INDEX = B.N_PHONE_INDEX
				            WHERE A.N_STATUS != 3 AND B.S_EXT_NUM LIKE '50__'<if test="N_MON_ID != null and N_MON_ID != ''"> AND A.N_MON_ID = #{N_MON_ID} </if> UNION
				            SELECT * FROM TB_SNMP_REAL_M02_PHONE A LEFT OUTER JOIN TB_SNMP_REAL_M02_EXT B ON A.N_MON_ID = B.N_MON_ID AND A.N_INDEX = B.N_PHONE_INDEX
				            WHERE A.N_STATUS != 3 AND B.S_EXT_NUM LIKE '51__'<if test="N_MON_ID != null and N_MON_ID != ''"> AND A.N_MON_ID = #{N_MON_ID} </if> UNION
				            SELECT * FROM TB_SNMP_REAL_M02_PHONE A LEFT OUTER JOIN TB_SNMP_REAL_M02_EXT B ON A.N_MON_ID = B.N_MON_ID AND A.N_INDEX = B.N_PHONE_INDEX
				            WHERE A.N_STATUS != 3 AND B.S_EXT_NUM LIKE '52__'<if test="N_MON_ID != null and N_MON_ID != ''"> AND A.N_MON_ID = #{N_MON_ID} </if> UNION
				            SELECT * FROM TB_SNMP_REAL_M02_PHONE A LEFT OUTER JOIN TB_SNMP_REAL_M02_EXT B ON A.N_MON_ID = B.N_MON_ID AND A.N_INDEX = B.N_PHONE_INDEX
				            WHERE A.N_STATUS != 3 AND B.S_EXT_NUM LIKE '53__'<if test="N_MON_ID != null and N_MON_ID != ''"> AND A.N_MON_ID = #{N_MON_ID} </if> UNION
				            SELECT * FROM TB_SNMP_REAL_M02_PHONE A LEFT OUTER JOIN TB_SNMP_REAL_M02_EXT B ON A.N_MON_ID = B.N_MON_ID AND A.N_INDEX = B.N_PHONE_INDEX
				            WHERE A.N_STATUS != 3 AND B.S_EXT_NUM LIKE '3___'<if test="N_MON_ID != null and N_MON_ID != ''"> AND A.N_MON_ID = #{N_MON_ID} </if> UNION
				            SELECT * FROM TB_SNMP_REAL_M02_PHONE A LEFT OUTER JOIN TB_SNMP_REAL_M02_EXT B ON A.N_MON_ID = B.N_MON_ID AND A.N_INDEX = B.N_PHONE_INDEX
				            WHERE A.N_STATUS != 3 AND B.S_EXT_NUM LIKE '57__'<if test="N_MON_ID != null and N_MON_ID != ''"> AND A.N_MON_ID = #{N_MON_ID} </if>
				        ) A
				UNION
				SELECT
				        '-3' CODE
				        , '한남'||'('||COUNT(*)||')' VAL
				FROM
				        (
				            SELECT * FROM TB_SNMP_REAL_M02_PHONE A LEFT OUTER JOIN TB_SNMP_REAL_M02_EXT B ON A.N_MON_ID = B.N_MON_ID AND A.N_INDEX = B.N_PHONE_INDEX
				            WHERE A.N_STATUS != 3 AND B.S_EXT_NUM LIKE '4____'<if test="N_MON_ID != null and N_MON_ID != ''"> AND A.N_MON_ID = #{N_MON_ID} </if>
				        ) A
				UNION
				SELECT
				        '-4' CODE
				        , '수지'||'('||COUNT(*)||')' VAL
				FROM
				        (
				            SELECT * FROM TB_SNMP_REAL_M02_PHONE A LEFT OUTER JOIN TB_SNMP_REAL_M02_EXT B ON A.N_MON_ID = B.N_MON_ID AND A.N_INDEX = B.N_PHONE_INDEX
				            WHERE A.N_STATUS != 3 AND B.S_EXT_NUM LIKE '58__'<if test="N_MON_ID != null and N_MON_ID != ''"> AND A.N_MON_ID = #{N_MON_ID} </if> UNION
				            SELECT * FROM TB_SNMP_REAL_M02_PHONE A LEFT OUTER JOIN TB_SNMP_REAL_M02_EXT B ON A.N_MON_ID = B.N_MON_ID AND A.N_INDEX = B.N_PHONE_INDEX
				            WHERE A.N_STATUS != 3 AND B.S_EXT_NUM LIKE '59__'<if test="N_MON_ID != null and N_MON_ID != ''"> AND A.N_MON_ID = #{N_MON_ID} </if> UNION
				            SELECT * FROM TB_SNMP_REAL_M02_PHONE A LEFT OUTER JOIN TB_SNMP_REAL_M02_EXT B ON A.N_MON_ID = B.N_MON_ID AND A.N_INDEX = B.N_PHONE_INDEX
				            WHERE A.N_STATUS != 3 AND B.S_EXT_NUM LIKE '2___'<if test="N_MON_ID != null and N_MON_ID != ''"> AND A.N_MON_ID = #{N_MON_ID} </if>
				        ) A
				UNION
		  		SELECT
		  				SUBSTR(S_EXT_NUM, 2, 3) CODE,
		  				(SELECT BRANCH_NAME FROM TB_CDR_BRANCH_CODE WHERE BRANCH_CODE = SUBSTR(A.S_EXT_NUM, 2, 3)) || '(' || COUNT(*) || ')' VAL
		  		FROM
		  				(
		  					SELECT
		  							(SELECT S_EXT_NUM FROM TB_SNMP_REAL_M02_EXT WHERE N_MON_ID = A.N_MON_ID AND N_PHONE_INDEX = A.N_INDEX LIMIT 1) S_EXT_NUM
		  					FROM
		  							TB_SNMP_REAL_M02_PHONE A
		  					WHERE
		  							(SELECT S_EXT_NUM FROM TB_SNMP_REAL_M02_EXT WHERE N_MON_ID = A.N_MON_ID AND N_PHONE_INDEX = A.N_INDEX LIMIT 1) LIKE '8______%'
		  					AND		N_STATUS != 3
		  					<if test="N_MON_ID != null and N_MON_ID != ''">
		  						AND N_MON_ID = #{N_MON_ID}
		  					</if>
		  				) A
		  		GROUP BY
		  				SUBSTR(S_EXT_NUM, 2, 3)

		  ) A
		<where>
			<if test="BRANCH_CODE != '' and BRANCH_CODE != null">
				CODE LIKE '%' || #{BRANCH_CODE} || '%'
	            OR VAL LIKE '%' || #{BRANCH_CODE} || '%(%)'
			</if>
		</where>
		  ORDER BY
		  			CODE
  	</select>

	<select id="cmb_cdr_branch2_ext" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.cmb_cdr_branch2_ext */
		SELECT
				*
		FROM
				(
					SELECT
							'-1' CODE, '전체(' || (
			  					SELECT COUNT(*) FROM TB_SNMP_REAL_M02_EXT
			  					<where>
			  						<if test="N_MON_ID != null and N_MON_ID != ''">
			  							N_MON_ID = #{N_MON_ID}
			  						</if>
			  					</where>
			  				) || ')' VAL
					FROM
							dual
					UNION
					SELECT
					        '-2' CODE
					        , '본점'||'('||COUNT(*)||')' VAL
					FROM
					        (
					            SELECT * FROM TB_SNMP_REAL_M02_EXT WHERE N_STATUS != 3 AND S_EXT_NUM LIKE '50__'<if test="N_MON_ID != null and N_MON_ID != ''">	AND N_MON_ID = #{N_MON_ID} </if> UNION
					            SELECT * FROM TB_SNMP_REAL_M02_EXT WHERE N_STATUS != 3 AND S_EXT_NUM LIKE '51__'<if test="N_MON_ID != null and N_MON_ID != ''">	AND N_MON_ID = #{N_MON_ID} </if> UNION
					            SELECT * FROM TB_SNMP_REAL_M02_EXT WHERE N_STATUS != 3 AND S_EXT_NUM LIKE '52__'<if test="N_MON_ID != null and N_MON_ID != ''">	AND N_MON_ID = #{N_MON_ID} </if> UNION
					            SELECT * FROM TB_SNMP_REAL_M02_EXT WHERE N_STATUS != 3 AND S_EXT_NUM LIKE '53__'<if test="N_MON_ID != null and N_MON_ID != ''">	AND N_MON_ID = #{N_MON_ID} </if> UNION
					            SELECT * FROM TB_SNMP_REAL_M02_EXT WHERE N_STATUS != 3 AND S_EXT_NUM LIKE '3___'<if test="N_MON_ID != null and N_MON_ID != ''">	AND N_MON_ID = #{N_MON_ID} </if> UNION
					            SELECT * FROM TB_SNMP_REAL_M02_EXT WHERE N_STATUS != 3 AND S_EXT_NUM LIKE '57__'<if test="N_MON_ID != null and N_MON_ID != ''">	AND N_MON_ID = #{N_MON_ID} </if>
					        ) A
					UNION
					SELECT
					        '-3' CODE
					        , '한남'||'('||COUNT(*)||')' VAL
					FROM
					        (SELECT * FROM TB_SNMP_REAL_M02_EXT WHERE N_STATUS != 3 AND S_EXT_NUM LIKE '4____'<if test="N_MON_ID != null and N_MON_ID != ''">	AND N_MON_ID = #{N_MON_ID} </if>) A
					UNION
					SELECT
					        '-4' CODE
					        , '수지'||'('||COUNT(*)||')' VAL
					FROM
					        (
					            SELECT * FROM TB_SNMP_REAL_M02_EXT WHERE N_STATUS != 3 AND S_EXT_NUM LIKE '58__'<if test="N_MON_ID != null and N_MON_ID != ''">	AND N_MON_ID = #{N_MON_ID} </if> UNION
					            SELECT * FROM TB_SNMP_REAL_M02_EXT WHERE N_STATUS != 3 AND S_EXT_NUM LIKE '59__'<if test="N_MON_ID != null and N_MON_ID != ''">	AND N_MON_ID = #{N_MON_ID} </if> UNION
					            SELECT * FROM TB_SNMP_REAL_M02_EXT WHERE N_STATUS != 3 AND S_EXT_NUM LIKE '2___'<if test="N_MON_ID != null and N_MON_ID != ''">	AND N_MON_ID = #{N_MON_ID} </if>
					        ) A
					UNION
			  		SELECT
					        SUBSTR(S_EXT_NUM,2,3) CODE
					        , (SELECT BRANCH_NAME FROM TB_CDR_BRANCH_CODE WHERE BRANCH_CODE = SUBSTR(A.S_EXT_NUM,2,3))||'('||COUNT(*)||')' VAL
					FROM
					        TB_SNMP_REAL_M02_EXT A
					WHERE
					        N_STATUS != 3
					AND     S_EXT_NUM LIKE '8______%'
					<if test="N_MON_ID != null and N_MON_ID != ''">
						AND N_MON_ID = #{N_MON_ID}
					</if>
					GROUP BY
					        SUBSTR(S_EXT_NUM,2,3)
			) A
		<where>
			<if test="BRANCH_CODE != '' and BRANCH_CODE != null">
				CODE LIKE '%' || #{BRANCH_CODE} || '%'
	            OR VAL LIKE '%' || #{BRANCH_CODE} || '%(%)'
			</if>
		</where>
  		ORDER BY
  				CODE
  	</select>

	<update id="updVaifExcel" parameterType="java.util.HashMap" statementType="PREPARED">
		/* server_detail.updVaifExcel */
  			UPDATE TB_SNMP_REAL_M03_VAIF A
			SET S_TEL_NUM = #{S_TEL_NUM}
			, S_NAME = #{S_NAME}
  			WHERE N_MON_ID = #{N_MON_ID}
  			AND (SELECT S_DESC FROM tb_snmp_real_m03_if WHERE N_MON_ID = A.N_MON_ID AND N_INDEX = A.N_INDEX AND N_TYPE = 102) = #{S_DESC}
	</update>

	<!-- TODO IVR 정보 조회 시 사용 -->
	<select id="IvrChannelLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.IvrChannelLstQry */
		SELECT
		        N_MON_ID, CH_NO
		FROM
		        TB_MON_IVR_CHANNEL
		WHERE
		        N_MON_ID = #{N_MON_ID} AND CALL_DATE >= TRUNC(SYSDATE())
		ORDER BY
		        CH_NO
	</select>
	<select id="IvrChannelDailyQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.IvrChannelDailyQry */
		SELECT
				ISNULL(SUM(TIME_0), 0) TIME_0, ISNULL(SUM(TIME_1), 0) TIME_1, ISNULL(SUM(TIME_2), 0) TIME_2, ISNULL(SUM(TIME_3), 0) TIME_3
				, ISNULL(SUM(TIME_4), 0) TIME_4, ISNULL(SUM(TIME_5), 0) TIME_5, ISNULL(SUM(TIME_6), 0) TIME_6, ISNULL(SUM(TIME_7), 0) TIME_7
				, ISNULL(SUM(TIME_8), 0) TIME_8, ISNULL(SUM(TIME_9), 0) TIME_9, ISNULL(SUM(TIME_10), 0) TIME_10, ISNULL(SUM(TIME_11), 0) TIME_11
				, ISNULL(SUM(TIME_12), 0) TIME_12, ISNULL(SUM(TIME_13), 0) TIME_13, ISNULL(SUM(TIME_14), 0) TIME_14, ISNULL(SUM(TIME_15), 0) TIME_15
				, ISNULL(SUM(TIME_16), 0) TIME_16, ISNULL(SUM(TIME_17), 0) TIME_17, ISNULL(SUM(TIME_18), 0) TIME_18, ISNULL(SUM(TIME_19), 0) TIME_19
				, ISNULL(SUM(TIME_20), 0) TIME_20, ISNULL(SUM(TIME_21), 0) TIME_21, ISNULL(SUM(TIME_22), 0) TIME_22, ISNULL(SUM(TIME_23), 0) TIME_23
		FROM     TB_IVR_CHANNEL_DAY_AVG
		WHERE
				N_MON_ID = #{N_MON_ID} AND INSERTDATE LIKE '20131112%' AND N_STATE IN (2,3)
	</select>


	<!-- M11 Switch 장비 -->
	<select id="SnmpM11InfoQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.SnmpM11InfoQry */
		SELECT
		        N_MON_ID, S_SYS_NAME, S_SYS_DESCR, S_SYS_UPTIME, N_IF_NUMBER
		        , (SELECT COUNT(*) CNT FROM TB_SNMP_REAL_M11_IF_STATUS WHERE N_MON_ID = A.N_MON_ID) N_IF_CNT
		        , (SELECT COUNT(*) CNT FROM TB_SNMP_REAL_M11_IF_STATUS WHERE N_MON_ID = A.N_MON_ID AND N_IF_OPER_STATUS = 1) N_OPER_CNT1
		        , (SELECT COUNT(*) CNT FROM TB_SNMP_REAL_M11_IF_STATUS WHERE N_MON_ID = A.N_MON_ID AND N_IF_OPER_STATUS != 1) N_OPER_CNT2
		FROM
		        TB_SNMP_REAL_M11_DEFAULT A
		WHERE
		        N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M11IfInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M11IfInfoLstQry */
		SELECT @NUM AS TOTAL_COUNT, X.* FROM (
    		SELECT
    				@NUM := @NUM + 1 AS NUM, A.*
    		FROM
					(
						SELECT
								N_MON_ID, N_INDEX, S_DESC, N_TYPE, N_MTU, N_SPEED, S_PHYS_ADDR
								, N_ADMIN_STATUS, N_OPER_STATUS
								, DATE_FORMAT(D_INS_DATE, '%Y-%m-%d %H:%i:%s') AS D_INS_DATE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE = A.N_TYPE) S_TYPE
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_ADMIN_STATUS) S_ADMIN_STATUS
								, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_OPER_STATUS) S_OPER_STATUS
						FROM
								TB_SNMP_REAL_M11_IF A
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A, (SELECT @NUM := 0) R
			ORDER BY
			<if test="sort == null">N_INDEX, D_INS_DATE DESC</if>
				<if test="sort != null">
					<choose>
						<when test="sort.size() == 0">
							N_INDEX, D_INS_DATE DESC
						</when>
						<otherwise>
							<include refid="SQL_OderBy"/>
						</otherwise>
					</choose>
			</if>
		) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="licenseInfoListQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.licenseInfoListQry */
		SELECT @NUM AS TOTAL_COUNT, X.* FROM (
    		SELECT
    				@NUM := @NUM + 1 AS NUM, A.*
    		FROM
					(
						SELECT
							MON_ID, LICENSE_TYPE, USE_COUNT, TOTAL_COUNT, `DESC`
						FROM
							TB_LICENSE_INFO A
						WHERE
							MON_ID = #{N_MON_ID}
					) A, (SELECT @NUM := 0) R
			ORDER BY
			<if test="sort == null">MON_ID, LICENSE_TYPE</if>
				<if test="sort != null">
					<choose>
						<when test="sort.size() == 0">
							MON_ID, LICENSE_TYPE
						</when>
						<otherwise>
							<include refid="SQL_OderBy"/>
						</otherwise>
					</choose>
			</if>
		) X
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M11IfInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M11IfInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M11_IF_STATUS
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M11TrafficUsageQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M11TrafficUsageQry */
		SELECT
		        TO_CHAR(D_START_DATE, 'yyyymmdd') N_DAY
		        , SUM(CASE WHEN S_HOUR = '00' THEN #{S_COLUMN} ELSE 0 END) TIME_00
		        , SUM(CASE WHEN S_HOUR = '01' THEN #{S_COLUMN} ELSE 0 END) TIME_01
		        , SUM(CASE WHEN S_HOUR = '02' THEN #{S_COLUMN} ELSE 0 END) TIME_02
		        , SUM(CASE WHEN S_HOUR = '03' THEN #{S_COLUMN} ELSE 0 END) TIME_03
		        , SUM(CASE WHEN S_HOUR = '04' THEN #{S_COLUMN} ELSE 0 END) TIME_04
		        , SUM(CASE WHEN S_HOUR = '05' THEN #{S_COLUMN} ELSE 0 END) TIME_05
		        , SUM(CASE WHEN S_HOUR = '06' THEN #{S_COLUMN} ELSE 0 END) TIME_06
		        , SUM(CASE WHEN S_HOUR = '07' THEN #{S_COLUMN} ELSE 0 END) TIME_07
		        , SUM(CASE WHEN S_HOUR = '08' THEN #{S_COLUMN} ELSE 0 END) TIME_08
		        , SUM(CASE WHEN S_HOUR = '09' THEN #{S_COLUMN} ELSE 0 END) TIME_09
		        , SUM(CASE WHEN S_HOUR = '10' THEN #{S_COLUMN} ELSE 0 END) TIME_10
		        , SUM(CASE WHEN S_HOUR = '11' THEN #{S_COLUMN} ELSE 0 END) TIME_11
		        , SUM(CASE WHEN S_HOUR = '12' THEN #{S_COLUMN} ELSE 0 END) TIME_12
		        , SUM(CASE WHEN S_HOUR = '13' THEN #{S_COLUMN} ELSE 0 END) TIME_13
		        , SUM(CASE WHEN S_HOUR = '14' THEN #{S_COLUMN} ELSE 0 END) TIME_14
		        , SUM(CASE WHEN S_HOUR = '15' THEN #{S_COLUMN} ELSE 0 END) TIME_15
		        , SUM(CASE WHEN S_HOUR = '16' THEN #{S_COLUMN} ELSE 0 END) TIME_16
		        , SUM(CASE WHEN S_HOUR = '17' THEN #{S_COLUMN} ELSE 0 END) TIME_17
		        , SUM(CASE WHEN S_HOUR = '18' THEN #{S_COLUMN} ELSE 0 END) TIME_18

		        , SUM(CASE WHEN S_HOUR = '19' THEN #{S_COLUMN} ELSE 0 END) TIME_19
		        , SUM(CASE WHEN S_HOUR = '20' THEN #{S_COLUMN} ELSE 0 END) TIME_20
		        , SUM(CASE WHEN S_HOUR = '21' THEN #{S_COLUMN} ELSE 0 END) TIME_21
		        , SUM(CASE WHEN S_HOUR = '22' THEN #{S_COLUMN} ELSE 0 END) TIME_22
		        , SUM(CASE WHEN S_HOUR = '23' THEN #{S_COLUMN} ELSE 0 END) TIME_23
		FROM
		        (
		            SELECT
		                    N_MON_ID, N_IF_INDEX, D_START_DATE, #{S_COLUMN}
		                    , TO_CHAR(D_START_DATE, 'hh24') S_HOUR
		            FROM
		                    TB_SNMP_REAL_M11_PACKETS_HOUR
		            WHERE
		                    N_MON_ID = #{N_MON_ID}
		            AND     N_IF_INDEX = #{N_IF_INDEX}
		            AND     D_START_DATE BETWEEN TO_DATE(#{N_DAY} || '000000', 'yyyymmddhh24miss') AND TO_DATE(#{N_DAY} || '235959', 'yyyymmddhh24miss')
		            ORDER BY
		                    TO_CHAR(D_START_DATE, 'hh24')
		) A
		GROUP BY
		        TO_CHAR(D_START_DATE, 'yyyymmdd')
	</select>

	<select id="M11TrafficUsageDayQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M11TrafficUsageDayQry */

		SELECT
		        TO_CHAR(D_START_DATE, 'yyyymm') N_MONTH
		        , SUM(CASE WHEN S_DAY = '01' THEN #{S_COLUMN} ELSE 0 END) TIME_00
		        , SUM(CASE WHEN S_DAY = '02' THEN #{S_COLUMN} ELSE 0 END) TIME_01
		        , SUM(CASE WHEN S_DAY = '03' THEN #{S_COLUMN} ELSE 0 END) TIME_02
		        , SUM(CASE WHEN S_DAY = '04' THEN #{S_COLUMN} ELSE 0 END) TIME_03
		        , SUM(CASE WHEN S_DAY = '05' THEN #{S_COLUMN} ELSE 0 END) TIME_04
		        , SUM(CASE WHEN S_DAY = '06' THEN #{S_COLUMN} ELSE 0 END) TIME_05
		        , SUM(CASE WHEN S_DAY = '07' THEN #{S_COLUMN} ELSE 0 END) TIME_06
		        , SUM(CASE WHEN S_DAY = '08' THEN #{S_COLUMN} ELSE 0 END) TIME_07
		        , SUM(CASE WHEN S_DAY = '09' THEN #{S_COLUMN} ELSE 0 END) TIME_08
		        , SUM(CASE WHEN S_DAY = '10' THEN #{S_COLUMN} ELSE 0 END) TIME_09
		        , SUM(CASE WHEN S_DAY = '11' THEN #{S_COLUMN} ELSE 0 END) TIME_10
		        , SUM(CASE WHEN S_DAY = '12' THEN #{S_COLUMN} ELSE 0 END) TIME_11
		        , SUM(CASE WHEN S_DAY = '13' THEN #{S_COLUMN} ELSE 0 END) TIME_12
		        , SUM(CASE WHEN S_DAY = '14' THEN #{S_COLUMN} ELSE 0 END) TIME_13
		        , SUM(CASE WHEN S_DAY = '15' THEN #{S_COLUMN} ELSE 0 END) TIME_14
		        , SUM(CASE WHEN S_DAY = '16' THEN #{S_COLUMN} ELSE 0 END) TIME_15
		        , SUM(CASE WHEN S_DAY = '17' THEN #{S_COLUMN} ELSE 0 END) TIME_16
		        , SUM(CASE WHEN S_DAY = '18' THEN #{S_COLUMN} ELSE 0 END) TIME_17
		        , SUM(CASE WHEN S_DAY = '19' THEN #{S_COLUMN} ELSE 0 END) TIME_18
		        , SUM(CASE WHEN S_DAY = '20' THEN #{S_COLUMN} ELSE 0 END) TIME_19
		        , SUM(CASE WHEN S_DAY = '21' THEN #{S_COLUMN} ELSE 0 END) TIME_20
		        , SUM(CASE WHEN S_DAY = '22' THEN #{S_COLUMN} ELSE 0 END) TIME_21
		        , SUM(CASE WHEN S_DAY = '23' THEN #{S_COLUMN} ELSE 0 END) TIME_22
		        , SUM(CASE WHEN S_DAY = '24' THEN #{S_COLUMN} ELSE 0 END) TIME_23
		        , SUM(CASE WHEN S_DAY = '25' THEN #{S_COLUMN} ELSE 0 END) TIME_24
		        , SUM(CASE WHEN S_DAY = '26' THEN #{S_COLUMN} ELSE 0 END) TIME_25
		        , SUM(CASE WHEN S_DAY = '27' THEN #{S_COLUMN} ELSE 0 END) TIME_26
		        , SUM(CASE WHEN S_DAY = '28' THEN #{S_COLUMN} ELSE 0 END) TIME_27
		        , SUM(CASE WHEN S_DAY = '29' THEN #{S_COLUMN} ELSE 0 END) TIME_28
		        , SUM(CASE WHEN S_DAY = '30' THEN #{S_COLUMN} ELSE 0 END) TIME_29
		        , SUM(CASE WHEN S_DAY = '31' THEN #{S_COLUMN} ELSE 0 END) TIME_30
		FROM
		        (
		            SELECT
		                    N_MON_ID, N_IF_INDEX, D_START_DATE, #{S_COLUMN}
		                    , TO_CHAR(D_START_DATE, 'dd') S_DAY
		            FROM
		                    TB_SNMP_REAL_M11_PACKETS_DAY
		            WHERE
		                    N_MON_ID = #{N_MON_ID}
		            AND     N_IF_INDEX = #{N_IF_INDEX}
		            AND     D_START_DATE BETWEEN TO_DATE(SUBSTR(#{N_MONTH},0,6) || '01000000', 'yyyymmddhh24miss') AND TO_DATE(SUBSTR(#{N_MONTH},0,8) || '235959', 'yyyymmddhh24miss')
		            ORDER BY
		                    TO_CHAR(D_START_DATE, 'dd')
		) A
		GROUP BY
		        TO_CHAR(D_START_DATE, 'yyyymm')

	</select>

	<select id="M11TrafficUsageMonthQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M11TrafficUsageMonthQry */
		SELECT
		        TO_CHAR(D_START_DATE, 'yyyy') N_YEAR
		        , SUM(CASE WHEN S_MONTH = '01' THEN #{S_COLUMN} ELSE 0 END) TIME_00
		        , SUM(CASE WHEN S_MONTH = '02' THEN #{S_COLUMN} ELSE 0 END) TIME_01
		        , SUM(CASE WHEN S_MONTH = '03' THEN #{S_COLUMN} ELSE 0 END) TIME_02
		        , SUM(CASE WHEN S_MONTH = '04' THEN #{S_COLUMN} ELSE 0 END) TIME_03
		        , SUM(CASE WHEN S_MONTH = '05' THEN #{S_COLUMN} ELSE 0 END) TIME_04
		        , SUM(CASE WHEN S_MONTH = '06' THEN #{S_COLUMN} ELSE 0 END) TIME_05
		        , SUM(CASE WHEN S_MONTH = '07' THEN #{S_COLUMN} ELSE 0 END) TIME_06
		        , SUM(CASE WHEN S_MONTH = '08' THEN #{S_COLUMN} ELSE 0 END) TIME_07
		        , SUM(CASE WHEN S_MONTH = '09' THEN #{S_COLUMN} ELSE 0 END) TIME_08
		        , SUM(CASE WHEN S_MONTH = '10' THEN #{S_COLUMN} ELSE 0 END) TIME_09
		        , SUM(CASE WHEN S_MONTH = '11' THEN #{S_COLUMN} ELSE 0 END) TIME_10
		        , SUM(CASE WHEN S_MONTH = '12' THEN #{S_COLUMN} ELSE 0 END) TIME_11
		        , 0 TIME_12
		        , 0 TIME_13
		        , 0 TIME_14
		        , 0 TIME_15
		        , 0 TIME_16
		        , 0 TIME_17
		        , 0 TIME_18
		        , 0 TIME_19
		        , 0 TIME_20
		        , 0 TIME_21
		        , 0 TIME_22
		        , 0 TIME_23
		FROM
		        (
		            SELECT
		                    N_MON_ID, N_IF_INDEX, D_START_DATE, #{S_COLUMN}
		                    , TO_CHAR(D_START_DATE, 'mm') S_MONTH
		            FROM
		                    TB_SNMP_REAL_M11_PACKETS_MONTH
		            WHERE
		                    N_MON_ID = #{N_MON_ID}
		            AND     N_IF_INDEX = #{N_IF_INDEX}
		            AND     D_START_DATE BETWEEN TO_DATE(SUBSTR(#{N_YEAR},0,4) || '0101000000', 'yyyymmddhh24miss') AND TO_DATE(SUBSTR(#{N_YEAR},0,4) || '1231235959', 'yyyymmddhh24miss')
		            ORDER BY
		                    TO_CHAR(D_START_DATE, 'mm')
		) A
		GROUP BY
		        TO_CHAR(D_START_DATE, 'yyyy')
	</select>
	
	<select id="qry_combo_m11_if" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.qry_combo_m11_if */
		SELECT
		        N_IF_INDEX CODE, S_IF_DESCR VAL
		FROM
		        TB_SNMP_REAL_M11_IF_STATUS
		WHERE
		        N_MON_ID = #{N_MON_ID}
		ORDER BY
		        N_IF_INDEX
	</select>


	<!-- M12 Standard 장비 -->
	<select id="SnmpM12InfoQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.SnmpM12InfoQry */
		SELECT
		        N_MON_ID, S_SYS_NAME, S_SYS_DESCR, S_SYS_UPTIME, N_IF_NUMBER
		        , (SELECT COUNT(*) CNT FROM TB_SNMP_REAL_M12_IF_STATUS WHERE N_MON_ID = A.N_MON_ID) N_IF_CNT
		        , (SELECT COUNT(*) CNT FROM TB_SNMP_REAL_M12_IF_STATUS WHERE N_MON_ID = A.N_MON_ID AND N_IF_OPER_STATUS = 1) N_OPER_CNT1
		        , (SELECT COUNT(*) CNT FROM TB_SNMP_REAL_M12_IF_STATUS WHERE N_MON_ID = A.N_MON_ID AND N_IF_OPER_STATUS != 1) N_OPER_CNT2
		FROM
		        TB_SNMP_REAL_M12_DEFAULT A
		WHERE
		        N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M12IfInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M12IfInfoLstQry */
		SELECT
			@ROWNUM AS TOTAL_COUNT, A.*
   		FROM
		(
			SELECT	@ROWNUM := @ROWNUM + 1 AS NUM
					, N_MON_ID, N_INDEX, S_DESC, N_TYPE, N_MTU, N_SPEED, S_PHYTS_ADDR
					, N_ADMIN_STATUS, N_OPER_STATUS
					, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '0' AND S_IN_VALUE = A.N_TYPE) S_TYPE
					, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '1' AND S_IN_VALUE = A.N_ADMIN_STATUS) S_ADMIN_STATUS
					, (SELECT S_OUT_VALUE FROM TB_SNMP_VALUE_TYPE_CODE WHERE N_SNMP_MAN_CODE = '4' AND N_SNMP_TYPE_CODE = '2' AND S_IN_VALUE = A.N_OPER_STATUS) S_OPER_STATUS
					, (SELECT S_NAME FROM TB_NUM_CODE WHERE S_GROUP_CODE = 'SNMP_IF_TYPE' AND N_CODE = A.N_TYPE) S_TYPE_NAME
			FROM
					TB_SNMP_REAL_M12_IF A, (SELECT @ROWNUM := 0) R
			WHERE
					N_MON_ID = #{N_MON_ID}
					AND N_TYPE IN (6, 24)
					AND N_SPEED > 0
		) A
		ORDER BY
		<if test="sort == null">N_INDEX</if>
			<if test="sort != null">
				<choose>
					<when test="sort.size() == 0">
						N_INDEX
					</when>
					<otherwise>
						<include refid="SQL_OderBy"/>
					</otherwise>
				</choose>
		</if>
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>

	<select id="M12IfInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M12IfInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M12_IF
		WHERE
				N_MON_ID = #{N_MON_ID}
				AND N_TYPE IN (6, 24)
				AND N_SPEED > 0
	</select>

	<select id="M12TrafficUsageQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M12TrafficUsageQry */
		SELECT
		        TO_CHAR(D_START_DATE, 'yyyymmdd') N_DAY
		        , SUM(CASE WHEN S_HOUR = '00' THEN #{S_COLUMN} ELSE 0 END) TIME_00
		        , SUM(CASE WHEN S_HOUR = '01' THEN #{S_COLUMN} ELSE 0 END) TIME_01
		        , SUM(CASE WHEN S_HOUR = '02' THEN #{S_COLUMN} ELSE 0 END) TIME_02
		        , SUM(CASE WHEN S_HOUR = '03' THEN #{S_COLUMN} ELSE 0 END) TIME_03
		        , SUM(CASE WHEN S_HOUR = '04' THEN #{S_COLUMN} ELSE 0 END) TIME_04
		        , SUM(CASE WHEN S_HOUR = '05' THEN #{S_COLUMN} ELSE 0 END) TIME_05
		        , SUM(CASE WHEN S_HOUR = '06' THEN #{S_COLUMN} ELSE 0 END) TIME_06
		        , SUM(CASE WHEN S_HOUR = '07' THEN #{S_COLUMN} ELSE 0 END) TIME_07
		        , SUM(CASE WHEN S_HOUR = '08' THEN #{S_COLUMN} ELSE 0 END) TIME_08
		        , SUM(CASE WHEN S_HOUR = '09' THEN #{S_COLUMN} ELSE 0 END) TIME_09
		        , SUM(CASE WHEN S_HOUR = '10' THEN #{S_COLUMN} ELSE 0 END) TIME_10
		        , SUM(CASE WHEN S_HOUR = '11' THEN #{S_COLUMN} ELSE 0 END) TIME_11
		        , SUM(CASE WHEN S_HOUR = '12' THEN #{S_COLUMN} ELSE 0 END) TIME_12
		        , SUM(CASE WHEN S_HOUR = '13' THEN #{S_COLUMN} ELSE 0 END) TIME_13
		        , SUM(CASE WHEN S_HOUR = '14' THEN #{S_COLUMN} ELSE 0 END) TIME_14
		        , SUM(CASE WHEN S_HOUR = '15' THEN #{S_COLUMN} ELSE 0 END) TIME_15
		        , SUM(CASE WHEN S_HOUR = '16' THEN #{S_COLUMN} ELSE 0 END) TIME_16
		        , SUM(CASE WHEN S_HOUR = '17' THEN #{S_COLUMN} ELSE 0 END) TIME_17
		        , SUM(CASE WHEN S_HOUR = '18' THEN #{S_COLUMN} ELSE 0 END) TIME_18
		        , SUM(CASE WHEN S_HOUR = '19' THEN #{S_COLUMN} ELSE 0 END) TIME_19
		        , SUM(CASE WHEN S_HOUR = '20' THEN #{S_COLUMN} ELSE 0 END) TIME_20
		        , SUM(CASE WHEN S_HOUR = '21' THEN #{S_COLUMN} ELSE 0 END) TIME_21
		        , SUM(CASE WHEN S_HOUR = '22' THEN #{S_COLUMN} ELSE 0 END) TIME_22
		        , SUM(CASE WHEN S_HOUR = '23' THEN #{S_COLUMN} ELSE 0 END) TIME_23
		FROM
		        (
		            SELECT
		                    N_MON_ID, N_IF_INDEX, D_START_DATE, #{S_COLUMN}
		                    , TO_CHAR(D_START_DATE, 'hh24') S_HOUR
		            FROM
		                    TB_SNMP_REAL_M12_PACKETS_HOUR
		            WHERE
		                    N_MON_ID = #{N_MON_ID}
		            AND     N_IF_INDEX = #{N_IF_INDEX}
		            AND     D_START_DATE BETWEEN TO_DATE(#{N_DAY} || '000000', 'yyyymmddhh24miss') AND TO_DATE(#{N_DAY} || '235959', 'yyyymmddhh24miss')
		            ORDER BY
		                    TO_CHAR(D_START_DATE, 'hh24')
		) A
		GROUP BY
		        TO_CHAR(D_START_DATE, 'yyyymmdd')
	</select>

	<select id="M12TrafficUsageDayQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M12TrafficUsageDayQry */
		<![CDATA[
		SELECT
		        TO_CHAR(D_START_DATE, 'yyyymm') N_MONTH
		        , SUM(CASE WHEN S_DAY = '01' THEN #{S_COLUMN} ELSE 0 END) TIME_00
		        , SUM(CASE WHEN S_DAY = '02' THEN #{S_COLUMN} ELSE 0 END) TIME_01
		        , SUM(CASE WHEN S_DAY = '03' THEN #{S_COLUMN} ELSE 0 END) TIME_02
		        , SUM(CASE WHEN S_DAY = '04' THEN #{S_COLUMN} ELSE 0 END) TIME_03
		        , SUM(CASE WHEN S_DAY = '05' THEN #{S_COLUMN} ELSE 0 END) TIME_04
		        , SUM(CASE WHEN S_DAY = '06' THEN #{S_COLUMN} ELSE 0 END) TIME_05
		        , SUM(CASE WHEN S_DAY = '07' THEN #{S_COLUMN} ELSE 0 END) TIME_06
		        , SUM(CASE WHEN S_DAY = '08' THEN #{S_COLUMN} ELSE 0 END) TIME_07
		        , SUM(CASE WHEN S_DAY = '09' THEN #{S_COLUMN} ELSE 0 END) TIME_08
		        , SUM(CASE WHEN S_DAY = '10' THEN #{S_COLUMN} ELSE 0 END) TIME_09
		        , SUM(CASE WHEN S_DAY = '11' THEN #{S_COLUMN} ELSE 0 END) TIME_10
		        , SUM(CASE WHEN S_DAY = '12' THEN #{S_COLUMN} ELSE 0 END) TIME_11
		        , SUM(CASE WHEN S_DAY = '13' THEN #{S_COLUMN} ELSE 0 END) TIME_12
		        , SUM(CASE WHEN S_DAY = '14' THEN #{S_COLUMN} ELSE 0 END) TIME_13
		        , SUM(CASE WHEN S_DAY = '15' THEN #{S_COLUMN} ELSE 0 END) TIME_14
		        , SUM(CASE WHEN S_DAY = '16' THEN #{S_COLUMN} ELSE 0 END) TIME_15
		        , SUM(CASE WHEN S_DAY = '17' THEN #{S_COLUMN} ELSE 0 END) TIME_16
		        , SUM(CASE WHEN S_DAY = '18' THEN #{S_COLUMN} ELSE 0 END) TIME_17
		        , SUM(CASE WHEN S_DAY = '19' THEN #{S_COLUMN} ELSE 0 END) TIME_18
		        , SUM(CASE WHEN S_DAY = '20' THEN #{S_COLUMN} ELSE 0 END) TIME_19
		        , SUM(CASE WHEN S_DAY = '21' THEN #{S_COLUMN} ELSE 0 END) TIME_20
		        , SUM(CASE WHEN S_DAY = '22' THEN #{S_COLUMN} ELSE 0 END) TIME_21
		        , SUM(CASE WHEN S_DAY = '23' THEN #{S_COLUMN} ELSE 0 END) TIME_22
		        , SUM(CASE WHEN S_DAY = '24' THEN #{S_COLUMN} ELSE 0 END) TIME_23
		        , SUM(CASE WHEN S_DAY = '25' THEN #{S_COLUMN} ELSE 0 END) TIME_24
		        , SUM(CASE WHEN S_DAY = '26' THEN #{S_COLUMN} ELSE 0 END) TIME_25
		        , SUM(CASE WHEN S_DAY = '27' THEN #{S_COLUMN} ELSE 0 END) TIME_26
		        , SUM(CASE WHEN S_DAY = '28' THEN #{S_COLUMN} ELSE 0 END) TIME_27
		        , SUM(CASE WHEN S_DAY = '29' THEN #{S_COLUMN} ELSE 0 END) TIME_28
		        , SUM(CASE WHEN S_DAY = '30' THEN #{S_COLUMN} ELSE 0 END) TIME_29
		        , SUM(CASE WHEN S_DAY = '31' THEN #{S_COLUMN} ELSE 0 END) TIME_30
		FROM
		        (
		            SELECT
		                    N_MON_ID, N_IF_INDEX, D_START_DATE, #{S_COLUMN}
		                    , TO_CHAR(D_START_DATE, 'dd') S_DAY
		            FROM
		                    TB_SNMP_REAL_M12_PACKETS_DAY
		            WHERE
		                    N_MON_ID = #{N_MON_ID}
		            AND     N_IF_INDEX = #{N_IF_INDEX}
		            AND     D_START_DATE BETWEEN TO_DATE(SUBSTR(#{N_MONTH},0,6) || '01000000', 'yyyymmddhh24miss') AND TO_DATE(SUBSTR(#{N_MONTH},0,8) || '235959', 'yyyymmddhh24miss')
		            ORDER BY
		                    TO_CHAR(D_START_DATE, 'dd')
		) A
		GROUP BY
		        TO_CHAR(D_START_DATE, 'yyyymm')
		]]>
	</select>

	<select id="M12TrafficUsageMonthQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M12TrafficUsageMonthQry */
		<![CDATA[
		SELECT
		        TO_CHAR(D_START_DATE, 'yyyy') N_YEAR
		        , SUM(CASE WHEN S_MONTH = '01' THEN #{S_COLUMN} ELSE 0 END) TIME_00
		        , SUM(CASE WHEN S_MONTH = '02' THEN #{S_COLUMN} ELSE 0 END) TIME_01
		        , SUM(CASE WHEN S_MONTH = '03' THEN #{S_COLUMN} ELSE 0 END) TIME_02
		        , SUM(CASE WHEN S_MONTH = '04' THEN #{S_COLUMN} ELSE 0 END) TIME_03
		        , SUM(CASE WHEN S_MONTH = '05' THEN #{S_COLUMN} ELSE 0 END) TIME_04
		        , SUM(CASE WHEN S_MONTH = '06' THEN #{S_COLUMN} ELSE 0 END) TIME_05
		        , SUM(CASE WHEN S_MONTH = '07' THEN #{S_COLUMN} ELSE 0 END) TIME_06
		        , SUM(CASE WHEN S_MONTH = '08' THEN #{S_COLUMN} ELSE 0 END) TIME_07
		        , SUM(CASE WHEN S_MONTH = '09' THEN #{S_COLUMN} ELSE 0 END) TIME_08
		        , SUM(CASE WHEN S_MONTH = '10' THEN #{S_COLUMN} ELSE 0 END) TIME_09
		        , SUM(CASE WHEN S_MONTH = '11' THEN #{S_COLUMN} ELSE 0 END) TIME_10
		        , SUM(CASE WHEN S_MONTH = '12' THEN #{S_COLUMN} ELSE 0 END) TIME_11
		        , 0 TIME_12
		        , 0 TIME_13
		        , 0 TIME_14
		        , 0 TIME_15
		        , 0 TIME_16
		        , 0 TIME_17
		        , 0 TIME_18
		        , 0 TIME_19
		        , 0 TIME_20
		        , 0 TIME_21
		        , 0 TIME_22
		        , 0 TIME_23
		FROM
		        (
		            SELECT
		                    N_MON_ID, N_IF_INDEX, D_START_DATE, #{S_COLUMN}
		                    , TO_CHAR(D_START_DATE, 'mm') S_MONTH
		            FROM
		                    TB_SNMP_REAL_M12_PACKETS_MONTH
		            WHERE
		                    N_MON_ID = #{N_MON_ID}
		            AND     N_IF_INDEX = #{N_IF_INDEX}
		            AND     D_START_DATE BETWEEN TO_DATE(SUBSTR(#{N_YEAR},0,4) || '0101000000', 'yyyymmddhh24miss') AND TO_DATE(SUBSTR(#{N_YEAR},0,4) || '1231235959', 'yyyymmddhh24miss')
		            ORDER BY
		                    TO_CHAR(D_START_DATE, 'mm')
		) A
		GROUP BY
		        TO_CHAR(D_START_DATE, 'yyyy')
		]]>
	</select>

	<select id="qry_combo_m12_if" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.qry_combo_m12_if */
		SELECT
		        N_IF_INDEX CODE, S_IF_DESCR VAL
		FROM
		        TB_SNMP_REAL_M12_IF_STATUS
		WHERE
		        N_MON_ID = #{N_MON_ID}
		ORDER BY
		        N_IF_INDEX
	</select>


	<!-- M13 Switch 장비 -->
	<select id="SnmpM13InfoQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.SnmpM13InfoQry */
		SELECT
				S_NAME, S_DESCRIPTION, S_VERSION
		FROM
				TB_SNMP_REAL_M13_GENERAL_INFO A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M13ComponentInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13ComponentInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INSTANCE_NUM</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_INSTANCE_NUM, N_CPNT_INDEX,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_COMPONENT_TYPE' AND C.N_CODE = B.N_TYPE) N_TYPE_NAME,
								S_NAME,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_COMPONENT_STATUS' AND C.N_CODE = B.N_STATUS) N_STATUS_NAME
						FROM
								TB_SNMP_REAL_M13_COMPONENT B
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M13ComponentInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13ComponentInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M13_COMPONENT A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M13ElementInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13ElementInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INSTANCE_NUM</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_INSTANCE_NUM, N_CPNT_INDEX, N_ELMT_INDEX, S_NAME, N_RUN_ID,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_COMPONENT_STATUS' AND C.N_CODE = B.N_STATUS) N_STATUS_NAME
						FROM
								TB_SNMP_REAL_M13_CPNT_ELEMENT B
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M13ElementInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13ElementInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M13_CPNT_ELEMENT A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M13RouterInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13RouterInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INSTANCE_NUM</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_INSTANCE_NUM, N_CPNT_INDEX,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_COMPONENT_SIDE' AND C.N_CODE = B.N_SIDE) N_SIDE_NAME,
								N_CALLS_PER_SEC, N_AGENTS_LOGGED_ON, N_CALLS_IN_PROGRESS, S_DUPLEX_PAIR_NAME, N_NIC_COUNT
						FROM
								TB_SNMP_REAL_M13_ROUTER B
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M13RouterInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13RouterInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M13_ROUTER A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M13NICInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13NICInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INSTANCE_NUM</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_INSTANCE_NUM, N_CPNT_INDEX, N_NIC_INDEX,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_NIC_TYPE' AND C.N_CODE = B.N_TYPE) N_TYPE_NAME,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_COMPONENT_STATUS' AND C.N_CODE = B.N_STATUS) N_STATUS_NAME
						FROM
								TB_SNMP_REAL_M13_NIC B
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M13NICInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13NICInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M13_NIC A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M13LoggerInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13LoggerInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INSTANCE_NUM</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_INSTANCE_NUM, N_CPNT_INDEX,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_COMPONENT_SIDE' AND C.N_CODE = B.N_SIDE) N_SIDE_NAME,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_LOGGER_TYPE' AND C.N_CODE = B.N_TYPE) N_TYPE_NAME,
								S_ROUTER_SIDEA_NAME, S_ROUTER_SIDEB_NAME, S_DUPLEX_PAIR_NAME, N_HDS_REPLICATION
						FROM
								TB_SNMP_REAL_M13_LOGGER B
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M13LoggerInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13LoggerInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M13_LOGGER A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M13DistributorAWInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13DistributorAWInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INSTANCE_NUM</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_INSTANCE_NUM, N_CPNT_INDEX,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_COMPONENT_SIDE' AND C.N_CODE = B.N_SIDE) N_SIDE_NAME,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_DIST_AW_TYPE' AND C.N_CODE = B.N_TYPE) N_TYPE_NAME,
								S_ADMIN_SITE_NAME, S_ROUTER_SIDEA_NAME, S_ROUTER_SIDEB_NAME, S_LOGGER_SIDEA_NAME, S_LOGGER_SIDEB_NAME, S_DUPLEX_PAIR_NAME,
								N_HDS_ENABLED, N_WEB_VIEW_ENABLED, N_WEB_VIEW_SERVER_NAME
						FROM
								TB_SNMP_REAL_M13_DIST_AW B
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M13DistributorAWInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13DistributorAWInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M13_DIST_AW A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M13PeripheralGWInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13PeripheralGWInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INSTANCE_NUM</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_INSTANCE_NUM, N_CPNT_INDEX, N_PG_NUMBER,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_COMPONENT_SIDE' AND C.N_CODE = B.N_SIDE) N_SIDE_NAME,
								S_ROUTER_SIDEA_NAME, S_ROUTER_SIDEB_NAME, S_DUPLEX_PAIR_NAME, N_PIM_COUNT
						FROM
								TB_SNMP_REAL_M13_PERIPHERAL_GW B
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M13PeripheralGWInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13PeripheralGWInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M13_PERIPHERAL_GW A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M13PIMInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13PIMInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INSTANCE_NUM</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_INSTANCE_NUM, N_CPNT_INDEX, N_PIM_NUMBER, S_PERIPHERAL_NAME,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_PERIPHERAL_TYPE' AND C.N_CODE = B.N_PERIPHERAL_TYPE) N_PERIPHERAL_TYPE_NAME,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_COMPONENT_STATUS' AND C.N_CODE = B.N_STATUS) N_STATUS_NAME,
								S_PERIPHERAL_HOST_NAME
						FROM
								TB_SNMP_REAL_M13_PIM B
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M13PIMInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13PIMInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M13_PIM A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M13CtiGWInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13CtiGWInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INSTANCE_NUM</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_INSTANCE_NUM, N_CPNT_INDEX, N_CG_NUMBER,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_COMPONENT_SIDE' AND C.N_CODE = B.N_SIDE) N_SIDE_NAME,
								S_PG_SIDEA_NAME, S_PG_SIDEB_NAME, S_DUPLEX_PAIR_NAME
						FROM
								TB_SNMP_REAL_M13_CTI_GATEWAY B
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M13CtiGWInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13CtiGWInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M13_CTI_GATEWAY A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>

	<select id="M13CtiOSInfoLstQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13CtiOSInfoLstQry */
		SELECT * FROM (
    		SELECT
    				ROW_NUMBER() OVER (ORDER BY
    										<if test="order_id != null and order_id != ''">#{order_id} #{asc_desc}</if>
    										<if test="order_id == null or order_id == ''">N_INSTANCE_NUM</if>
    								   ) NUM
    				, A.*
    		FROM
					(
						SELECT
								N_INSTANCE_NUM, N_CPNT_INDEX, S_SERVER_NAME, S_PERIPHERAL_NAME,
								(SELECT S_NAME FROM TB_NUM_CODE C WHERE S_GROUP_CODE = 'CCA_PERIPHERAL_TYPE' AND C.N_CODE = B.N_PERIPHERAL_TYPE) N_PERIPHERAL_TYPE_NAME,
								S_CG_SIDEA_NAME, S_CG_SIDEB_NAME, S_PEER_NAME
						FROM
								TB_SNMP_REAL_M13_CTI_OS B
						WHERE
								N_MON_ID = #{N_MON_ID}
					) A
		) X
		WHERE
			num BETWEEN ((#{nowpage}-1) * #{pagecnt})+1 AND (#{nowpage} * #{pagecnt})
	</select>

	<select id="M13CtiOSInfoLstCntQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.M13CtiOSInfoLstCntQry */
		SELECT
				COUNT(*) CNT
		FROM
				TB_SNMP_REAL_M13_CTI_OS A
		WHERE
				N_MON_ID = #{N_MON_ID}
	</select>
	
	<!-- 자원, 프로세스, 서비스, 라이센스, E1리포트, 로그리포트 -->
	<select id="selectServerDetailResourceTabMenu" resultType="com.nns.nexpector.watcher.vo.ServerDetailTabMenu">
		/* server_detail.selectServerDetailResourceTabMenu */
		SELECT TAB_KEY AS tabKey
					, TAB_NAME AS tabName
					, TAB_URL AS tabUrl 
		FROM TB_SVR_TAB_MENU 
		WHERE SEQ_SVR_TAB_MENU IN (2, 15, 16, 214, 217, 218)
	</select>

	<!-- 장애, DB Status (SNMP M12 Tab Interface 임시방편으로 추가) 
	<select id="selectServerDetailDefaultTabMenu" resultType="com.nns.nexpector.watcher.vo.ServerDetailTabMenu">
		/* server_detail.selectServerDetailDefaultTabMenu */
		SELECT SEQ_SVR_TAB_MENU, TAB_KEY AS tabKey, TAB_NAME AS tabName, TAB_URL AS tabUrl FROM TB_SVR_TAB_MENU WHERE SEQ_SVR_TAB_MENU IN (14, 102)
		UNION ALL
		SELECT 9999, 'CNT_INTERFACE',  'Interface',	'/watcher/go_server_detail.snmp_m12.if_info.htm'
		ORDER BY CASE WHEN SEQ_SVR_TAB_MENU = 14 THEN 0 ELSE 1 END DESC
	</select>
	-->
	<!-- 장애, DB Status -->
	<select id="selectServerDetailDefaultTabMenu" resultType="com.nns.nexpector.watcher.vo.ServerDetailTabMenu">
		/* server_detail.selectServerDetailDefaultTabMenu */
		SELECT SEQ_SVR_TAB_MENU, TAB_KEY AS tabKey, TAB_NAME AS tabName, TAB_URL AS tabUrl FROM TB_SVR_TAB_MENU WHERE SEQ_SVR_TAB_MENU IN (14, 102)
		ORDER BY CASE WHEN SEQ_SVR_TAB_MENU = 14 THEN 0 ELSE 1 END DESC
	</select>
	
	<!-- 2015-04-28 신규추가 한준호 -->
	<select id="selectServerDetailTabMenu" parameterType="com.nns.nexpector.watcher.vo.ServerDetailTabMenu" resultType="com.nns.nexpector.watcher.vo.ServerDetailTabMenu">
		/* server_detail.selectServerDetailTabMenu */
		SELECT
				A.N_STYLE_CODE AS styleCode, A.N_SNMP_MAN_CODE AS snmpManCode,
        		A.N_TYPE_CODE AS typeCode, A.S_VG_NAME AS vgName,
        		A.SEQ_SVR_TAB_MENU AS seqSvrTabMenu, B.TAB_KEY AS tabKey,
        		B.TAB_NAME AS tabName, B.TAB_URL AS tabUrl
		FROM
				TB_SVR_TAB A
		INNER JOIN
				TB_SVR_TAB_MENU B
		ON
			A.SEQ_SVR_TAB_MENU = B.SEQ_SVR_TAB_MENU
		WHERE
			A.N_TYPE_CODE = #{typeCode} OR A.N_SNMP_MAN_CODE = #{snmpManCode}
		ORDER BY A.ORDER_NUM ASC
	</select>
	<!--// 2015-04-28 신규추가 한준호 -->

	<!-- 2015-07-06 미래에셋 버전에서만 신규적용 -->
	<select id="selectAddServerDefaultTabMenu" resultType="com.nns.nexpector.watcher.vo.ServerDetailTabMenu">
		/* server_detail.selectAddServerDefaultTabMenu */ distinct
		SELECT
                B.TAB_KEY AS tabKey, B.TAB_NAME AS tabName, B.TAB_URL AS tabUrl, A.ORDER_NUM
        FROM
                TB_SVR_TAB A
        INNER JOIN
                TB_SVR_TAB_MENU B
        ON
            A.SEQ_SVR_TAB_MENU = B.SEQ_SVR_TAB_MENU
		WHERE A.N_TYPE_CODE = 3000
		AND A.SEQ_SVR_TAB_MENU IN (2, 15, 16, 17, 18, 14)
		ORDER BY ORDER_NUM ASC
	</select>
	<!--// 2015-07-06 미래에셋 버전에서만 신규적용 -->

	<!-- 2016-04-28 DB현황조회 추가  -->
	<select id="selectServerDetailDBStatusTabMenu" resultType="com.nns.nexpector.watcher.vo.ServerDetailTabMenu">
		/* server_detail.selectServerDetailDBStatusTabMenu */
		SELECT TAB_KEY AS tabKey, TAB_NAME AS tabName, TAB_URL AS tabUrl FROM TB_SVR_TAB_MENU WHERE SEQ_SVR_TAB_MENU IN (102)
	</select>
	<!--// 2016-04-28 DB현황조회 추가  -->
	
	<select id="SvrLstByMonIdPageNum" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.SvrLstByMonIdPageNum */
		SELECT
				@NUM AS TOTAL_COUNT
				, A.*
		FROM (
				SELECT
						N_MON_ID, S_MON_NAME, N_TYPE_CODE, @NUM := @NUM + 1 AS NUM
				FROM
						TB_MON_INFO A, (SELECT @NUM := 0) R
				WHERE
						N_MON_ID IN (SELECT N_MON_ID FROM TB_USER_MON_LIST WHERE S_USER_ID = #{SESSION_USER_ID})
				AND A.N_STYLE_CODE != 3
				<if test="N_GROUP_CODE != '' and N_GROUP_CODE != null">
					AND N_GROUP_CODE = #{N_GROUP_CODE}
				</if>
		) A
		WHERE N_MON_ID = #{MON_ID}
	</select>

	<select id="contactInfoLstQry" resultType="java.util.HashMap" parameterType="java.lang.Integer">
		/* server_detail.contactInfoLstQry */
		SELECT
			   FOUND_ROWS() AS TOTAL_COUNT,
			   TMC.N_CONTACT_ID,
			   TMC.S_DEPART,
			   TMC.S_NAME,
			   TMC.S_PHONE
		  FROM TB_MON_CONTACT_LIST TMCL, TB_MON_CONTACT TMC
		 WHERE TMCL.N_CONTACT_ID = TMC.N_CONTACT_ID AND TMCL.N_MON_ID = #{N_MON_ID}
	</select>
	
	<select id="selectMonInfo" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.selectMonInfo */
		SELECT
		        A.N_STYLE_CODE, A.N_TYPE_CODE,
		        COALESCE((SELECT N_SNMP_MAN_CODE FROM TB_SNMP_INFO WHERE N_MON_ID = A.N_MON_ID), 0) SNMP_MAN_CODE
		        , (SELECT S_TYPE_NAME FROM TB_SVR_TYPE WHERE N_TYPE_CODE = A.N_TYPE_CODE) S_TYPE_NAME
		FROM TB_MON_INFO A
		WHERE N_MON_ID = #{N_MON_ID}
	</select>
	
	<!-- 녹취 장비 녹취 건수 조회 -->
	<select id="recDbBackupCountInfo" resultType="java.util.HashMap" parameterType="java.lang.Integer">
		/* server_detail.recDbBackupCountInfo */
		SELECT  N_TOTAL_COUNT, N_BACKUP_COUNT FROM TB_REC_DB_BACKUPCHECK WHERE N_MON_ID = #{N_MON_ID}
	</select>
	
	<!-- 온습도계 센서정보 -->
	<select id="selectM13Sensor" resultType="java.util.HashMap" parameterType="java.lang.Integer">
		SELECT /* server_detail.selectM13Sensor */
			   N_SENSOR_NUM,
			   N_NOW_TEMPERATURE, N_NOW_HUMIDITY, N_REVISE_TEMPERATURE,
			   N_REVISE_HUMIDITY, N_TEMP_CURRENT_OUTPUT, N_HUMI_CURRENT_OUTPUT,
			   N_TEMP_CURRENT_REVISION, N_HUMI_CURRENT_REVISION, N_DEW_POINT_TEMPERATURE, S_NET_CONNECTION_ALARM,
			   (SELECT S_NAME FROM TB_NUM_CODE WHERE S_GROUP_CODE = 'NET_CONNECTION' AND N_CODE = S_NET_CONNECTION_ALARM) S_NET_CONNECTION_ALARM_NAME
		  FROM TB_SNMP_REAL_M13_SENSOR
		 WHERE N_MON_ID = #{N_MON_ID}
		ORDER BY N_SENSOR_NUM ASC
	</select>
	
	<!-- DB현황 조회 2016-04-29 -->
    <select id="DbStatusRetrieveQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.DbStatusRetrieveQry */
		SELECT NUM AS TOTAL_COUNT, X.*
		FROM (
			SELECT 
				@NUM := @NUM+1 AS NUM,
				A.S_DBNAME AS DBNAME, 
				(SELECT S_NAME FROM TB_CODE C WHERE S_GROUP_CODE = 'DB_VENDOR' AND A.N_TYPE = C.S_VALUE ) AS TYPE_NAME,
				(SELECT S_NAME FROM TB_CODE C WHERE S_GROUP_CODE = 'DB_STATE' AND B.N_STATE = C.S_VALUE ) AS DB_STATE,
				B.N_CONNECTION AS CONNECTION,
				B.N_TABLESPACEMAX AS TABLESPACEMAX,
				B.N_TABLESPACECUR AS TABLESPACECUR,
				B.N_TABLESPACE AS TABLESPACE
			FROM TB_DB_INFO A, TB_DB_STATE B, (SELECT @NUM := 0) R
			WHERE A.N_DB_ID = B.N_DB_ID
			    AND A.N_MON_ID = #{N_MON_ID}
		) X
    </select>
    
	<select id="ServerDetailDatacnt_Default" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_Default */
		SELECT
			(SELECT COUNT(*) FROM TB_MON_MAP WHERE N_MON_ID = A.N_MON_ID AND N_MON_TYPE IN (0, 1, 2) AND F_USE = 'Y') CNT_RESOURCE
			, (SELECT COUNT(*) FROM TB_MON_MAP WHERE N_MON_ID = A.N_MON_ID AND N_MON_TYPE IN (3) AND F_USE = 'Y') CNT_PROCESS
			, (SELECT COUNT(*) FROM TB_MON_MAP WHERE N_MON_ID = A.N_MON_ID AND N_MON_TYPE IN (4) AND F_USE = 'Y') CNT_SERVICE
			, (SELECT COUNT(*) FROM TB_LICENSE_INFO WHERE MON_ID = A.N_MON_ID ) CNT_LICENSE_INFO
			, (SELECT COUNT(*)  FROM tb_cli_vg_e1_bri WHERE MON_ID = A.N_MON_ID) CNT_E1BRI
			, (SELECT COUNT(MON_ID) FROM TB_MON_SYSLOG WHERE MON_ID = A.N_MON_ID) CNT_SYSLOG 
			, 0 CNT_ACCESS
			, 1 CNT_FAULT
		FROM
			(SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>
    
    <select id="ServerDetailDatacnt_Agent" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_Agent */
		SELECT
			(SELECT COUNT(*) FROM TB_DB_INFO WHERE N_MON_ID = A.N_MON_ID) CNT_DB_STATUS
			, (SELECT COUNT(*) FROM TB_DB_STATE WHERE N_MON_ID = A.N_MON_ID) CNT_DB_STATUS_INFO
		FROM
			(SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>
    
	<select id="ServerDetailDatacnt_AvayaCm" resultType="java.util.HashMap" parameterType="java.util.HashMap">
    	/* server_detail.ServerDetailDatacnt_AvayaCm */
      SELECT
         (SELECT COUNT(MON_ID) FROM TB_CLI_PBX_TRAFFIC_TRUNK WHERE MON_ID = A.N_MON_ID) CNT_CM_TRUNK_TRAFFIC
        ,(SELECT COUNT(MON_ID) FROM TB_CLI_PBX_CAPACITY WHERE MON_ID = A.N_MON_ID) CNT_CM_CAPACITY
        ,(SELECT COUNT(MON_ID) FROM TB_CLI_PBX_REGIPSTATION WHERE MON_ID = A.N_MON_ID) CNT_CM_PHONE
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M01_HEALTH WHERE N_MON_ID = A.N_MON_ID) CNT_CM_HEALTH
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M01_BOARD WHERE N_MON_ID = A.N_MON_ID) CNT_CM_BOARD
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M01_TRUNK WHERE N_MON_ID = A.N_MON_ID) CNT_CM_TRUNK
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M01_ALARM WHERE N_MON_ID = A.N_MON_ID) CNT_CM_ALARM
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M01_NOW_ALARM WHERE N_MON_ID = A.N_MON_ID) CNT_CM_SERVER_ALARM
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M01_ALARM_CNT WHERE N_MON_ID = A.N_MON_ID) CNT_CM_ALARM_CNT
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M01_RESTART WHERE N_MON_ID = A.N_MON_ID) CNT_CM_RESTART
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M01_OCCUPANCY WHERE N_MON_ID = A.N_MON_ID) CNT_CM_OCCUPANCY
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M01_VERSION WHERE N_MON_ID = A.N_MON_ID) CNT_CM_VERSION
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M01_PNLOAD WHERE N_MON_ID = A.N_MON_ID) CNT_CM_PNLOAD
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M01_HUNTLIST WHERE N_MON_ID = A.N_MON_ID) CNT_CM_HUNTLIST
        ,(SELECT COUNT(MON_ID) FROM tb_cli_pbx_callforward WHERE MON_ID = A.N_MON_ID) CNT_TRANSFER_CALL
      FROM
        (SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
    </select>
    
    <select id="ServerDetailDatacnt_CiscoCm" resultType="java.util.HashMap" parameterType="java.util.HashMap">
    	/* server_detail.ServerDetailDatacnt_CiscoCm */
      SELECT
         (SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M02_DEFAULT WHERE N_MON_ID = A.N_MON_ID) CNT_CISCO_DEF
        ,(SELECT COUNT(MON_ID) FROM TB_CLI_PBX_REGIPSTATION WHERE MON_ID = A.N_MON_ID) CNT_CM_PHONE
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M02_EXT WHERE N_MON_ID = A.N_MON_ID) CNT_CISCO_EXT
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M02_GW WHERE N_MON_ID = A.N_MON_ID) CNT_CISCO_GW
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M02_H323 WHERE N_MON_ID = A.N_MON_ID) CNT_CISCO_H323
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M02_SIP WHERE N_MON_ID = A.N_MON_ID) CNT_CISCO_SIP
        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M02_PHONE WHERE N_MON_ID = A.N_MON_ID) CNT_CISCO_PHONE
        ,(SELECT COUNT(N_MON_ID) FROM TB_DB_INFO WHERE N_MON_ID = A.N_MON_ID) CNT_DB_STATUS
      FROM
        (SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
    </select>
    
	<!-- IVR Data Count -->
	<select id="ServerDetailDatacnt_IVR" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_IVR */
		SELECT
			(SELECT COUNT(*) FROM TB_MON_IVR_CHANNEL WHERE N_MON_ID = A.N_MON_ID) CNT_IVR_CHANNEL
			, (SELECT COUNT(*) FROM TB_MON_FAX3_CHANNEL WHERE N_MON_ID = A.N_MON_ID) CNT_FAX_CHANNEL
			, (SELECT COUNT(*) FROM TB_MON_VRS_CHANNEL WHERE N_MON_ID = A.N_MON_ID) CNT_REC_CHANNEL
			, (SELECT COUNT(N_MON_ID) FROM TB_DB_INFO WHERE N_MON_ID = A.N_MON_ID) CNT_DB_STATUS
			, (SELECT COUNT(MON_ID)   FROM TB_CLI_IVR_LIST_SESSIONS B WHERE B.MON_ID = A.N_MON_ID) CNT_IVR_CHNL_APP
			, (SELECT COUNT(MON_ID)   FROM TB_CLI_IVR_LIST_SESSIONS B WHERE B.MON_ID = A.N_MON_ID) CNT_IVR_CHNL_DTL
		FROM
			(SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>
    
	<!-- 녹취 장비 Data Count -->
	<select id="ServerDetailDatacnt_REC" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_REC */
		SELECT
			(SELECT COUNT(N_MON_ID) FROM TB_REC_DB_BACKUPCHECK WHERE N_MON_ID = A.N_MON_ID) CNT_REC_BACKUP
			,(SELECT COUNT(N_MON_ID) FROM TB_DB_INFO WHERE N_MON_ID = A.N_MON_ID) CNT_DB_STATUS
		FROM
			(SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>	
	
	<select id="ServerDetailDatacnt_Fw" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_Fw */
		SELECT
			(SELECT COUNT(N_MON_ID) FROM TB_TRAP_FW_MF2 WHERE N_MON_ID = A.N_MON_ID) CNT_TRAP
		FROM
		    (SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>
    
    <select id="ServerDetailDatacnt_Snmp" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_Snmp */
		SELECT
		    (SELECT COUNT(*) FROM TB_MON_ICMP_RES WHERE N_MON_ID = A.N_MON_ID) CNT_ICMP
			, 0 CNT_ACCESS
			, 1 CNT_TEMP_HUMIDITY
			, 1 CNT_UPS_INFO
			, 1 CNT_UPS_STATUS
		FROM
		    (SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>

	<select id="ServerDetailDatacnt_Ups" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_Ups */
		SELECT
	        (SELECT COUNT(*) FROM TB_MON_ICMP_RES WHERE N_MON_ID = A.N_MON_ID) CNT_ICMP
			, 0 CNT_ACCESS
			, (SELECT COUNT(*) FROM (SELECT N_MON_ID FROM TB_SNMP_REAL_M09_UPS WHERE N_MON_ID = #{N_MON_ID} UNION ALL SELECT N_MON_ID FROM TB_SNMP_REAL_M09_BATTERY WHERE N_MON_ID = #{N_MON_ID})) CNT_UPS_INFO
			, (SELECT COUNT(*)
				 FROM (SELECT N_MON_ID FROM TB_SNMP_REAL_M09_IN_TOTAL WHERE N_MON_ID = #{N_MON_ID}
				 		UNION ALL
					   SELECT N_MON_ID FROM TB_SNMP_REAL_M09_OUT_TOTAL WHERE N_MON_ID = #{N_MON_ID}
					    UNION ALL
					   SELECT N_MON_ID FROM TB_SNMP_REAL_M09_BYPASS_TOTAL WHERE N_MON_ID = #{N_MON_ID})) CNT_UPS_STATUS
		FROM
		        (SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>

	<select id="ServerDetailDatacnt_TempHumidity" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_TempHumidity */
		SELECT
	        (SELECT COUNT(*) FROM TB_MON_ICMP_RES WHERE N_MON_ID = A.N_MON_ID) CNT_ICMP
			, 0 CNT_ACCESS
			, (SELECT COUNT(*) FROM TB_SNMP_REAL_M10_DEFAULT WHERE N_MON_ID = A.N_MON_ID ) CNT_TEMP_HUMIDITY
		FROM
	        (SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>

    <select id="ServerDetailDatacnt_SnmpM13" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_SnmpM13 */
		SELECT
			(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_DEFAULT WHERE N_MON_ID = A.N_MON_ID) CNT_M03_DEFAULT
			, (SELECT COUNT(N_MON_ID) FROM TB_MON_MAP WHERE N_MON_ID = A.N_MON_ID AND N_MON_TYPE IN (0, 1, 2) AND F_USE = 'Y') CNT_M03_RESOURCE
			, (SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_IF WHERE N_MON_ID = A.N_MON_ID AND N_TYPE IN (6, 24) AND N_SPEED > 0) CNT_M03_IF
			, (SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_IF WHERE N_MON_ID = A.N_MON_ID AND N_TYPE = 18) CNT_M03_PRI
			, (SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_E1_STATUS WHERE N_MON_ID = A.N_MON_ID) CNT_M03_E1
			, (SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_DSP WHERE N_MON_ID = A.N_MON_ID) CNT_M03_DSP
			, (SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_VAIF WHERE N_MON_ID = A.N_MON_ID) CNT_M03_VAIF
			, (SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_ENV_VOLT WHERE N_MON_ID = A.N_MON_ID) CNT_M03_VOLT
			, (SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_ENV_TEMP WHERE N_MON_ID = A.N_MON_ID) CNT_M03_TEMP
			, (SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_ENV_FAN WHERE N_MON_ID = A.N_MON_ID) CNT_M03_FAN
			, (SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_ENV_POWER WHERE N_MON_ID = A.N_MON_ID) CNT_M03_POWER
			, 1 CNT_M03_ALM
        FROM
			(SELECT #{N_MON_ID} N_MON_ID FROM DUAL ) A
	</select>
	
	<!-- 	
	<select id="ServerDetailDatacnt_SnmpM13" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.SnmpM13DatacntQry */
		SELECT
			(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M13_SENSOR WHERE N_MON_ID = A.N_MON_ID) CNT_SENSOR
			, 1 CNT_FAULT
		FROM
			(SELECT #{N_MON_ID} N_MON_ID FROM DUAL ) A
    </select> 
    -->
    
	<!-- DB 장비 Data Count -->
	<select id="ServerDetailDatacnt_DB" resultType="java.util.HashMap" parameterType="java.util.HashMap">
      SELECT /* server_detail.ServerDetailDatacnt_DB */
	        (SELECT COUNT(MON_ID) FROM TB_CLI_DB_NETBACKUP_TPCONF WHERE MON_ID = A.N_MON_ID) CNT_DB_TPCONF
	        , (SELECT COUNT(MON_ID) FROM TB_CLI_DB_NETBACKUP_MEDIA WHERE MON_ID = A.N_MON_ID) CNT_DB_MEDIA
	        , (SELECT COUNT(MON_ID)
	        	 FROM (SELECT MON_ID FROM TB_CLI_DB_NETBACKUP_STATUS WHERE MON_ID = #{N_MON_ID}
				  	   UNION ALL
				  	   SELECT MON_ID FROM TB_CLI_DB_NETBACKUP_STATUS2 WHERE MON_ID = #{N_MON_ID}
				  	   )M
				  	   ) CNT_DB_STATUS_INFO
				  ,(SELECT COUNT(N_MON_ID) FROM TB_DB_INFO WHERE N_MON_ID = A.N_MON_ID) CNT_DB_STATUS	
      FROM
        (SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
    </select>
    
    <!-- FAX Data Count -->
	<select id="ServerDetailDatacnt_FAX" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_FAX */
		SELECT
			 (SELECT COUNT(*) FROM tb_http_fax_channel_info WHERE MON_ID = A.N_MON_ID) CNT_FAX_CHANNEL
			,(SELECT COUNT(*) FROM TB_DB_STATE WHERE N_MON_ID = A.N_MON_ID) CNT_DB_STATUS_INFO
			,(SELECT COUNT(N_MON_ID) FROM TB_DB_INFO WHERE N_MON_ID = A.N_MON_ID) CNT_DB_STATUS
		FROM
			(SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>
	
	<!-- Cisco VoiceGateway Datacnt -->
	<select id="ServerDetailDatacnt_m03" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_m03 */
		SELECT
	        (SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_DEFAULT WHERE N_MON_ID = A.N_MON_ID) CNT_VG_DEF
	        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_IF WHERE N_MON_ID = A.N_MON_ID AND N_TYPE IN (6, 24) AND N_SPEED > 0) CNT_VG_INTERFACE
	        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_IF WHERE N_MON_ID = A.N_MON_ID AND N_TYPE = 18) CNT_VG_PRIINTERFACE
	        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_E1_STATUS WHERE N_MON_ID = A.N_MON_ID) CNT_VG_E1
	        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_ISDN WHERE N_MON_ID = A.N_MON_ID) CNT_VG_ISDN
	        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_DSP WHERE N_MON_ID = A.N_MON_ID) CNT_VG_DSP
	        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_VAIF WHERE N_MON_ID = A.N_MON_ID) CNT_VG_VAINTERFACE
	        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_ENV_VOLT WHERE N_MON_ID = A.N_MON_ID) CNT_VG_VOLT
	        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_ENV_TEMP WHERE N_MON_ID = A.N_MON_ID) CNT_VG_TEMPERATURE
	        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_ENV_FAN WHERE N_MON_ID = A.N_MON_ID) CNT_VG_FAN
	        ,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M03_ENV_POWER WHERE N_MON_ID = A.N_MON_ID) CNT_VG_POWER
      	FROM
        	(SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>
	
	<!-- Cisoco Switch Datacnt -->
	<select id="ServerDetailDatacnt_m04" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_m04 */
		SELECT
			(SELECT COUNT(MON_ID) FROM TB_CLI_PBX_CAPACITY WHERE MON_ID = A.N_MON_ID) CNT_CM_CAPACITY
			,(SELECT COUNT(MON_ID) FROM TB_CLI_PBX_TRAFFIC_TRUNK WHERE MON_ID = A.N_MON_ID) CNT_CM_TRUNK_TRAFFIC
			,(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M04_IF WHERE N_MON_ID = A.N_MON_ID) CNT_CISCO_SWTICH_IF
			, 1 AS CNT_SWITCH_TRAFFIC
		FROM
			(SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>
	
	<!-- Avaya Switch Datacnt -->
	<select id="ServerDetailDatacnt_m11" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_m11 */
		SELECT
			(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M11_IF WHERE N_MON_ID = A.N_MON_ID) CNT_AVAYA_SWITCH_IF
		FROM
			(SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>
	
	<!-- Avaya Switch Datacnt -->
	<select id="ServerDetailDatacnt_m12" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_m12 */
		SELECT
			(SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M12_IF WHERE N_MON_ID = A.N_MON_ID) CNT_STD_IF
		FROM
			(SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>	
	
	<!-- Avaya VoiceGateway Datacnt -->
	<select id="ServerDetailDatacnt_m16" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* server_detail.ServerDetailDatacnt_m16 */
		SELECT
	        (SELECT COUNT(N_MON_ID) FROM TB_SNMP_REAL_M11_IF WHERE N_MON_ID = A.N_MON_ID) CNT_AVAYA_VG_IF
        	,(SELECT COUNT(MON_ID) FROM TB_CLI_VG_FAN WHERE MON_ID = A.N_MON_ID) CNT_AVAYA_VG_FAN
			,(SELECT COUNT(MON_ID) FROM TB_CLI_VG_POWER WHERE MON_ID = A.N_MON_ID) CNT_AVAYA_VG_POWER
			,(SELECT COUNT(MON_ID) FROM TB_CLI_VG_TEMP WHERE MON_ID = A.N_MON_ID) CNT_AVAYA_VG_TEMP
			,(SELECT COUNT(MON_ID) FROM TB_CLI_VG_VOIP WHERE MON_ID = A.N_MON_ID) CNT_AVAYA_VG_VOIP
      	FROM
        	(SELECT #{N_MON_ID} N_MON_ID FROM dual ) A
	</select>
	
	<select id="detailMonMapInfo" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		select A.N_MON_ID, A.S_MON_IP, A.S_MON_NAME, B.S_MON_NAME AS S_MAP_NAME
		from tb_mon_info A, tb_mon_map B
		where A.N_MON_ID = B.N_MON_ID AND A.N_MON_ID = #{N_MON_ID} AND B.S_MAP_KEY = #{S_MAP_KEY} 
	</select>
	

	
	<select id="cmb_ciscovg_interface" resultType="java.util.HashMap" parameterType="java.util.HashMap">
    	SELECT /* common.cmb_network_interface */
        	N_INDEX CODE
        	, CONCAT(S_DESC, ' (', S_ALIAS , ')' ) VAL
		FROM
			TB_SNMP_REAL_M03_IF A
		WHERE
			N_MON_ID = #{N_MON_ID}
			AND N_TYPE IN (6, 24)
			AND N_SPEED > 0
		ORDER BY N_INDEX
	</select>	
	
	<select id="cmb_standard_interface" resultType="java.util.HashMap" parameterType="java.util.HashMap">
    	SELECT /* common.cmb_network_interface */
        	N_INDEX CODE
        	, CONCAT(S_DESC, ' (', S_ALIAS , ')' ) VAL
		FROM
			TB_SNMP_REAL_M12_IF A
		WHERE
			N_MON_ID = #{N_MON_ID}
			AND N_TYPE IN (6, 24)
			AND N_SPEED > 0
		ORDER BY N_INDEX
	</select>	
	

	<select id="standardTrafficUsingDetailHistoryQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* snmp_m12.switchTrafficUsingDetailHistoryQry */
		select N_MON_ID, N_INDEX, TIMES, MAX(IFNULL(N_IN_OCTETS, 0)) AS N_IN_OCTETS, MAX(IFNULL(N_OUT_OCTETS, 0)) AS N_OUT_OCTETS, MAX(IFNULL(N_TOTAL_OCTETS, 0)) AS N_TOTAL_OCTETS
		from (
			select *, date_format(D_INS_DATE, '%Y%m%d%H%i%s') TIMES
			from tb_snmp_real_m12_if_traffic_${TARGET_MONTH}
			where N_MON_ID = #{N_MON_ID}
				AND	N_INDEX = #{N_INDEX}
				AND D_INS_DATE &gt;= str_to_date(#{START_DATE}, '%Y%m%d%H%i')
				AND D_INS_DATE &lt; str_to_date(#{END_DATE}, '%Y%m%d%H%i')
		) A
		group by N_MON_ID, N_INDEX, TIMES
		order by TIMES
	</select>
	
	<select id="standardTrafficUsingDetailAvgQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		select N_MON_ID, N_INDEX
			, AVG(N_IN_OCTETS) AVG_IN, AVG(N_OUT_OCTETS) AVG_OUT, AVG(N_TOTAL_OCTETS) AVG_TOTAL
		from tb_snmp_real_m12_if_traffic_${TARGET_MONTH}
		where N_MON_ID = #{N_MON_ID}
			AND	N_INDEX = #{N_INDEX}
			AND D_INS_DATE &gt;= str_to_date(#{START_DATE}, '%Y%m%d%H%i')
			AND D_INS_DATE &lt; str_to_date(#{END_DATE}, '%Y%m%d%H%i')
		group by N_MON_ID, N_INDEX
	</select>

	<select id="standardTrafficUsingDetailMaxQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT MAX_IN.N_MON_ID, MAX_IN.N_INDEX, MAX_IN.N_IN_OCTETS, MAX_OUT.N_OUT_OCTETS, MAX_IN.D_INS_DATE AS MAX_IN_DATE, MAX_OUT.D_INS_DATE AS MAX_OUT_DATE
		FROM (
			SELECT N_MON_ID, N_INDEX, N_IN_OCTETS, DATE_FORMAT(D_INS_DATE, '%Y-%m-%d %H:%i:%s') D_INS_DATE
			FROM TB_SNMP_REAL_m12_IF_TRAFFIC_${TARGET_MONTH}
			WHERE 
				N_MON_ID = #{N_MON_ID}
				AND N_INDEX = #{N_INDEX}
				AND N_IN_OCTETS = (
					SELECT 
						MAX(N_IN_OCTETS)
					FROM TB_SNMP_REAL_m12_IF_TRAFFIC_${TARGET_MONTH}
					WHERE 
						N_MON_ID = #{N_MON_ID}
						AND N_INDEX = #{N_INDEX}
						AND D_INS_DATE &gt;= str_to_date(#{START_DATE}, '%Y%m%d%H%i')
						AND D_INS_DATE &lt; str_to_date(#{END_DATE}, '%Y%m%d%H%i')
				)
				AND D_INS_DATE &gt;= str_to_date(#{START_DATE}, '%Y%m%d%H%i')
				AND D_INS_DATE &lt; str_to_date(#{END_DATE}, '%Y%m%d%H%i')
			ORDER BY D_INS_DATE DESC
			LIMIT 1
		) MAX_IN, 
		(
			SELECT N_MON_ID, N_INDEX, N_OUT_OCTETS, DATE_FORMAT(D_INS_DATE, '%Y-%m-%d %H:%i:%s') D_INS_DATE
			FROM TB_SNMP_REAL_m12_IF_TRAFFIC_${TARGET_MONTH}
			WHERE
				N_MON_ID = #{N_MON_ID}
				AND N_INDEX = #{N_INDEX} 
				AND N_OUT_OCTETS = (
					SELECT 
						MAX(N_OUT_OCTETS)
					FROM TB_SNMP_REAL_m12_IF_TRAFFIC_${TARGET_MONTH}
					WHERE 
						N_MON_ID = #{N_MON_ID}
						AND N_INDEX = #{N_INDEX}
						AND D_INS_DATE &gt;= str_to_date(#{START_DATE}, '%Y%m%d%H%i')
						AND D_INS_DATE &lt; str_to_date(#{END_DATE}, '%Y%m%d%H%i')
				)
				AND D_INS_DATE &gt;= str_to_date(#{START_DATE}, '%Y%m%d%H%i')
				AND D_INS_DATE &lt; str_to_date(#{END_DATE}, '%Y%m%d%H%i')
			ORDER BY D_INS_DATE DESC
			LIMIT 1
		) MAX_OUT
	</select>			
	
	<select id="ciscovgTrafficUsingDetailHistoryQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* snmp_m03.switchTrafficUsingDetailHistoryQry */
		select N_MON_ID, N_INDEX, TIMES, MAX(IFNULL(N_IN_OCTETS, 0)) AS N_IN_OCTETS, MAX(IFNULL(N_OUT_OCTETS, 0)) AS N_OUT_OCTETS, MAX(IFNULL(N_TOTAL_OCTETS, 0)) AS N_TOTAL_OCTETS
		from (
			select *, date_format(D_INS_DATE, '%Y%m%d%H%i%s') TIMES
			from tb_snmp_real_m03_if_traffic_${TARGET_MONTH}
			where N_MON_ID = #{N_MON_ID}
				AND	N_INDEX = #{N_INDEX}
				AND D_INS_DATE &gt;= str_to_date(#{START_DATE}, '%Y%m%d%H%i')
				AND D_INS_DATE &lt; str_to_date(#{END_DATE}, '%Y%m%d%H%i')
		) A
		group by N_MON_ID, N_INDEX, TIMES
		order by TIMES
	</select>		
	
	<select id="ciscovgTrafficUsingDetailAvgQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		select N_MON_ID, N_INDEX
			, AVG(N_IN_OCTETS) AVG_IN, AVG(N_OUT_OCTETS) AVG_OUT, AVG(N_TOTAL_OCTETS) AVG_TOTAL
		from tb_snmp_real_m03_if_traffic_${TARGET_MONTH}
		where N_MON_ID = #{N_MON_ID}
			AND	N_INDEX = #{N_INDEX}
			AND D_INS_DATE &gt;= str_to_date(#{START_DATE}, '%Y%m%d%H%i')
				AND D_INS_DATE &lt; str_to_date(#{END_DATE}, '%Y%m%d%H%i')
		group by N_MON_ID, N_INDEX
	</select>

	<select id="ciscovgTrafficUsingDetailMaxQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT MAX_IN.N_MON_ID, MAX_IN.N_INDEX, MAX_IN.N_IN_OCTETS, MAX_OUT.N_OUT_OCTETS, MAX_IN.D_INS_DATE AS MAX_IN_DATE, MAX_OUT.D_INS_DATE AS MAX_OUT_DATE
		FROM (
			SELECT N_MON_ID, N_INDEX, N_IN_OCTETS, DATE_FORMAT(D_INS_DATE, '%Y-%m-%d %H:%i:%s') D_INS_DATE
			FROM TB_SNMP_REAL_m03_IF_TRAFFIC_${TARGET_MONTH}
			WHERE 
				N_MON_ID = #{N_MON_ID}
				AND N_INDEX = #{N_INDEX}
				AND N_IN_OCTETS = (
					SELECT 
						MAX(N_IN_OCTETS)
					FROM TB_SNMP_REAL_m03_IF_TRAFFIC_${TARGET_MONTH}
					WHERE 
						N_MON_ID = #{N_MON_ID}
						AND N_INDEX = #{N_INDEX}
						AND D_INS_DATE &gt;= str_to_date(#{START_DATE}, '%Y%m%d%H%i')
						AND D_INS_DATE &lt; str_to_date(#{END_DATE}, '%Y%m%d%H%i')
				)
				AND D_INS_DATE &gt;= str_to_date(#{START_DATE}, '%Y%m%d%H%i')
				AND D_INS_DATE &lt; str_to_date(#{END_DATE}, '%Y%m%d%H%i')
			ORDER BY D_INS_DATE DESC
			LIMIT 1
		) MAX_IN, 
		(
			SELECT N_MON_ID, N_INDEX, N_OUT_OCTETS, DATE_FORMAT(D_INS_DATE, '%Y-%m-%d %H:%i:%s') D_INS_DATE
			FROM TB_SNMP_REAL_M03_IF_TRAFFIC_${TARGET_MONTH}
			WHERE
				N_MON_ID = #{N_MON_ID}
				AND N_INDEX = #{N_INDEX} 
				AND N_OUT_OCTETS = (
					SELECT 
						MAX(N_OUT_OCTETS)
					FROM TB_SNMP_REAL_M03_IF_TRAFFIC_${TARGET_MONTH}
					WHERE 
						N_MON_ID = #{N_MON_ID}
						AND N_INDEX = #{N_INDEX}
						AND D_INS_DATE &gt;= str_to_date(#{START_DATE}, '%Y%m%d%H%i')
						AND D_INS_DATE &lt; str_to_date(#{END_DATE}, '%Y%m%d%H%i')
				)
				AND D_INS_DATE &gt;= str_to_date(#{START_DATE}, '%Y%m%d%H%i')
				AND D_INS_DATE &lt; str_to_date(#{END_DATE}, '%Y%m%d%H%i')
			ORDER BY D_INS_DATE DESC
			LIMIT 1
		) MAX_OUT
	</select>		
	

	<select id="ciscovgTrafficUsingHistoryQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* snmp_m03.switchTrafficUsingHistoryQry */
		select N_MON_ID, N_INDEX, TIMES, MAX(IFNULL(N_IN_OCTETS, 0)) AS N_IN_OCTETS, MAX(IFNULL(N_OUT_OCTETS, 0)) AS N_OUT_OCTETS, MAX(IFNULL(N_TOTAL_OCTETS, 0)) AS N_TOTAL_OCTETS
		from (
			select *, date_format(D_INS_DATE, '%Y%m%d%H%i%s') TIMES
			from tb_snmp_real_m03_if_traffic_${TARGET_MONTH}
			where N_MON_ID = #{N_MON_ID}
				AND	N_INDEX = #{N_INDEX}
				AND D_INS_DATE &gt;= date_add(str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s'), interval -1 hour)
				AND D_INS_DATE &lt; str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s')
		) A
		group by N_MON_ID, N_INDEX, TIMES
		order by TIMES
	</select>
	
	<select id="ciscovgE1UsingHistoryQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* snmp_m03.ciscovgE1UsingHistoryQry */
		SELECT                        
			  N_MON_ID, N_DAY, N_TIME, N_ACTIVE
		FROM
			  TB_SNMP_REAL_M03_E1_PEAK
		WHERE 	A.N_MON_ID = #{N_MON_ID}
		AND     A.N_DAY = #{N_DAY}
	</select>	
	
	
	<select id="ciscovgTrafficUsingAvgQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		select N_MON_ID, N_INDEX
			, AVG(N_IN_OCTETS) AVG_IN, AVG(N_OUT_OCTETS) AVG_OUT, AVG(N_TOTAL_OCTETS) AVG_TOTAL
		from tb_snmp_real_m03_if_traffic_${TARGET_MONTH}
		where N_MON_ID = #{N_MON_ID}
			AND	N_INDEX = #{N_INDEX}
			AND D_INS_DATE &gt;= date_add(str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s'), interval -1 hour)
				AND D_INS_DATE &lt; str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s')
		group by N_MON_ID, N_INDEX
	</select>

	<select id="ciscovgTrafficUsingMaxQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT MAX_IN.N_MON_ID, MAX_IN.N_INDEX, MAX_IN.N_IN_OCTETS, MAX_OUT.N_OUT_OCTETS, MAX_IN.D_INS_DATE AS MAX_IN_DATE, MAX_OUT.D_INS_DATE AS MAX_OUT_DATE
		FROM (
			SELECT N_MON_ID, N_INDEX, N_IN_OCTETS, DATE_FORMAT(D_INS_DATE, '%Y-%m-%d %H:%i:%s') D_INS_DATE
			FROM TB_SNMP_REAL_m03_IF_TRAFFIC_${TARGET_MONTH}
			WHERE 
				N_MON_ID = #{N_MON_ID}
				AND N_INDEX = #{N_INDEX}
				AND N_IN_OCTETS = (
					SELECT 
						MAX(N_IN_OCTETS)
					FROM TB_SNMP_REAL_m03_IF_TRAFFIC_${TARGET_MONTH}
					WHERE 
						N_MON_ID = #{N_MON_ID}
						AND N_INDEX = #{N_INDEX}
						AND D_INS_DATE &gt;= date_add(str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s'), interval -1 hour)
						AND D_INS_DATE &lt; str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s')
				)
				AND D_INS_DATE &gt;= date_add(str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s'), interval -1 hour)
				AND D_INS_DATE &lt; str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s')
			ORDER BY D_INS_DATE DESC
			LIMIT 1
		) MAX_IN, 
		(
			SELECT N_MON_ID, N_INDEX, N_OUT_OCTETS, DATE_FORMAT(D_INS_DATE, '%Y-%m-%d %H:%i:%s') D_INS_DATE
			FROM TB_SNMP_REAL_M03_IF_TRAFFIC_${TARGET_MONTH}
			WHERE
				N_MON_ID = #{N_MON_ID}
				AND N_INDEX = #{N_INDEX} 
				AND N_OUT_OCTETS = (
					SELECT 
						MAX(N_OUT_OCTETS)
					FROM TB_SNMP_REAL_M03_IF_TRAFFIC_${TARGET_MONTH}
					WHERE 
						N_MON_ID = #{N_MON_ID}
						AND N_INDEX = #{N_INDEX}
						AND D_INS_DATE &gt;= date_add(str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s'), interval -1 hour)
						AND D_INS_DATE &lt; str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s')
				)
				AND D_INS_DATE &gt;= date_add(str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s'), interval -1 hour)
				AND D_INS_DATE &lt; str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s')
			ORDER BY D_INS_DATE DESC
			LIMIT 1
		) MAX_OUT
	</select>	
	

	<select id="standardTrafficUsingHistoryQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		/* snmp_m12.switchTrafficUsingHistoryQry */
		select N_MON_ID, N_INDEX, TIMES, MAX(IFNULL(N_IN_OCTETS, 0)) AS N_IN_OCTETS, MAX(IFNULL(N_OUT_OCTETS, 0)) AS N_OUT_OCTETS, MAX(IFNULL(N_TOTAL_OCTETS, 0)) AS N_TOTAL_OCTETS
		from (
			select *, date_format(D_INS_DATE, '%Y%m%d%H%i%s') TIMES
			from tb_snmp_real_m12_if_traffic_${TARGET_MONTH}
			where N_MON_ID = #{N_MON_ID}
				AND	N_INDEX = #{N_INDEX}
				AND D_INS_DATE &gt;= date_add(str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s'), interval -1 hour)
				AND D_INS_DATE &lt; str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s')
		) A
		group by N_MON_ID, N_INDEX, TIMES
		order by TIMES
	</select>
	
	<select id="standardTrafficUsingAvgQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		select N_MON_ID, N_INDEX
			, AVG(N_IN_OCTETS) AVG_IN, AVG(N_OUT_OCTETS) AVG_OUT, AVG(N_TOTAL_OCTETS) AVG_TOTAL
		from tb_snmp_real_m12_if_traffic_${TARGET_MONTH}
		where N_MON_ID = #{N_MON_ID}
			AND	N_INDEX = #{N_INDEX}
			AND D_INS_DATE &gt;= date_add(str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s'), interval -1 hour)
				AND D_INS_DATE &lt; str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s')
		group by N_MON_ID, N_INDEX
	</select>

	<select id="standardTrafficUsingMaxQry" resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT MAX_IN.N_MON_ID, MAX_IN.N_INDEX, MAX_IN.N_IN_OCTETS, MAX_OUT.N_OUT_OCTETS, MAX_IN.D_INS_DATE AS MAX_IN_DATE, MAX_OUT.D_INS_DATE AS MAX_OUT_DATE
		FROM (
			SELECT N_MON_ID, N_INDEX, N_IN_OCTETS, DATE_FORMAT(D_INS_DATE, '%Y-%m-%d %H:%i:%s') D_INS_DATE
			FROM TB_SNMP_REAL_m12_IF_TRAFFIC_${TARGET_MONTH}
			WHERE 
				N_MON_ID = #{N_MON_ID}
				AND N_INDEX = #{N_INDEX}
				AND N_IN_OCTETS = (
					SELECT 
						MAX(N_IN_OCTETS)
					FROM TB_SNMP_REAL_m12_IF_TRAFFIC_${TARGET_MONTH}
					WHERE 
						N_MON_ID = #{N_MON_ID}
						AND N_INDEX = #{N_INDEX}
						AND D_INS_DATE &gt;= date_add(str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s'), interval -1 hour)
						AND D_INS_DATE &lt; str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s')
				)
				AND D_INS_DATE &gt;= date_add(str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s'), interval -1 hour)
				AND D_INS_DATE &lt; str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s')
			ORDER BY D_INS_DATE DESC
			LIMIT 1
		) MAX_IN, 
		(
			SELECT N_MON_ID, N_INDEX, N_OUT_OCTETS, DATE_FORMAT(D_INS_DATE, '%Y-%m-%d %H:%i:%s') D_INS_DATE
			FROM TB_SNMP_REAL_m12_IF_TRAFFIC_${TARGET_MONTH}
			WHERE
				N_MON_ID = #{N_MON_ID}
				AND N_INDEX = #{N_INDEX} 
				AND N_OUT_OCTETS = (
					SELECT 
						MAX(N_OUT_OCTETS)
					FROM TB_SNMP_REAL_m12_IF_TRAFFIC_${TARGET_MONTH}
					WHERE 
						N_MON_ID = #{N_MON_ID}
						AND N_INDEX = #{N_INDEX}
						AND D_INS_DATE &gt;= date_add(str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s'), interval -1 hour)
						AND D_INS_DATE &lt; str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s')
				)
				AND D_INS_DATE &gt;= date_add(str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s'), interval -1 hour)
				AND D_INS_DATE &lt; str_to_date(CONCAT(#{N_DAY}, DATE_FORMAT(NOW(), '%H%i%s')), '%Y%m%d%H%i%s')
			ORDER BY D_INS_DATE DESC
			LIMIT 1
		) MAX_OUT
	</select>
	
	<select id="ServerDetailE1ReportList"  resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT MON_ID
				, PORT
				, LINE_STATUS
				, CUR_SLIP
				, CUR_FRLOSS
				, CUR_ERRORED
				, TOT_SLIP
				, TOT_FRLOSS
				, TOT_ERRORED
				, date_format(D_REG_TIME, '%Y-%m-%d %H:%i:%s') AS D_REG_TIME
				, COUNT(*) OVER () AS TOTAL_COUNT
		FROM tb_cli_vg_e1_bri A
		WHERE MON_ID = #{N_MON_ID}
			AND date_format(D_REG_TIME, '%Y%m%d%H') BETWEEN date_format(STR_TO_DATE(#{S_ST_DT}, '%Y%m%d%H'), '%Y%m%d%H') AND date_format(STR_TO_DATE(#{S_ED_DT}, '%Y%m%d%H'), '%Y%m%d%H')
		ORDER BY D_REG_TIME DESC
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>
	
	<select id="ServerDetailSysLogList"  resultType="java.util.HashMap" parameterType="java.util.HashMap">
		SELECT 	MON_ID
				, IPADDRESS
				, HOST
				, Facility
				, Priority
				, Tag
				, Message
				, date_format(D_REG_TIME, '%Y-%m-%d %H:%i:%s') AS D_REG_TIME
				, COUNT(*) OVER () AS TOTAL_COUNT
		FROM tb_mon_syslog A
		WHERE MON_ID = #{N_MON_ID}
			AND date_format(D_REG_TIME, '%Y%m%d%H') BETWEEN date_format(STR_TO_DATE(#{S_ST_DT}, '%Y%m%d%H'), '%Y%m%d%H') AND date_format(STR_TO_DATE(#{S_ED_DT}, '%Y%m%d%H'), '%Y%m%d%H')
		ORDER BY D_REG_TIME DESC
		LIMIT #{firstRecordIndex}, #{lastRecordIndex}
	</select>
</mapper>